{"ast":null,"code":"import _objectSpread from\"D:/Study/Git/CSIT314-GP/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';class ApiService{constructor(){this.token=localStorage.getItem('token');}setToken(token){this.token=token;if(token){localStorage.setItem('token',token);}else{localStorage.removeItem('token');}}getHeaders(){const headers={'Content-Type':'application/json'};if(this.token){headers.Authorization=\"Bearer \".concat(this.token);}return headers;}async request(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const url=\"\".concat(API_BASE_URL).concat(endpoint);const config=_objectSpread({headers:this.getHeaders()},options);try{const response=await fetch(url,config);const data=await response.json();if(!response.ok){throw new Error(data.error||\"HTTP error! status: \".concat(response.status));}return data;}catch(error){console.error(\"API request failed: \".concat(endpoint),error);throw error;}}async get(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};let url=endpoint;if(options.params){const queryString=new URLSearchParams(options.params).toString();url=\"\".concat(endpoint).concat(endpoint.includes('?')?'&':'?').concat(queryString);}return this.request(url,{method:'GET'});}async post(endpoint,data){return this.request(endpoint,{method:'POST',body:JSON.stringify(data)});}async put(endpoint,data){return this.request(endpoint,{method:'PUT',body:JSON.stringify(data)});}async delete(endpoint){return this.request(endpoint,{method:'DELETE'});}async getUsers(){const response=await this.get('/users');return response.data||[];}async getAllUsers(){var _response$data;let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const queryParams=_objectSpread({limit:1000,page:1},params);const response=await this.get('/admin/users',{params:queryParams});return((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.users)||[];}async batchUpdateUsers(action,userIds){const response=await this.post('/admin/users/batch',{action,userIds});return response.data;}async getUserById(id){const response=await this.get(\"/users/\".concat(id));return response.data;}async createUser(userData){const response=await this.post('/users',userData);return response.data;}async updateUser(id,userData){const response=await this.put(\"/users/\".concat(id),userData);return response.data;}async deleteUser(id){await this.delete(\"/users/\".concat(id));}async getCategories(){var _response$data2;const response=await this.get('/categories');return((_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.categories)||[];}async getCategoryById(id){const response=await this.get(\"/categories/\".concat(id));return response.data;}async createCategory(categoryData){const response=await this.post('/categories',categoryData);return response.data;}async updateCategory(id,categoryData){const response=await this.put(\"/categories/\".concat(id),categoryData);return response.data;}async deleteCategory(id){await this.delete(\"/categories/\".concat(id));}async getRequests(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const queryParams=_objectSpread({limit:1000,page:1},params);const response=await this.get('/requests',{params:queryParams});return response.data||[];}async getAllRequests(){var _response$data3;let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const queryParams=_objectSpread({limit:1000,page:1},params);const response=await this.get('/requests',{params:queryParams});return((_response$data3=response.data)===null||_response$data3===void 0?void 0:_response$data3.requests)||[];}async getRequestById(id){const response=await this.get(\"/requests/\".concat(id));return response.data;}async createRequest(requestData){const response=await this.post('/requests',requestData);return response.data;}async createRequestWithFiles(requestData){const url=\"\".concat(API_BASE_URL,\"/requests\");const token=this.token;const formData=new FormData();const appendFormField=(key,value)=>{if(value===undefined||value===null)return;if(value instanceof File){formData.append(key,value);return;}if(typeof value==='object'&&!Array.isArray(value)){Object.entries(value).forEach(_ref=>{let[subKey,subValue]=_ref;if(typeof subValue==='object'&&subValue!==null){formData.append(\"\".concat(key,\"[\").concat(subKey,\"]\"),JSON.stringify(subValue));}else{formData.append(\"\".concat(key,\"[\").concat(subKey,\"]\"),subValue);}});}else if(Array.isArray(value)){value.forEach(item=>formData.append(\"\".concat(key,\"[]\"),typeof item==='object'?JSON.stringify(item):item));}else{formData.append(key,value);}};Object.entries(requestData).forEach(_ref2=>{let[key,value]=_ref2;if(key==='attachments')return;appendFormField(key,value);});if(requestData.attachments&&requestData.attachments.length){for(const file of requestData.attachments){formData.append('attachments',file);}}const headers={};if(token)headers.Authorization=\"Bearer \".concat(token);const response=await fetch(url,{method:'POST',headers,body:formData});const data=await response.json();if(!response.ok)throw new Error(data.error||\"HTTP error! status: \".concat(response.status));return data.data;}async updateRequest(id,requestData){const response=await this.put(\"/requests/\".concat(id),requestData);return response.data;}async deleteRequest(id){await this.delete(\"/requests/\".concat(id));}async getUserRequests(userId){var _response$data4;const response=await this.get('/requests');return((_response$data4=response.data)===null||_response$data4===void 0?void 0:_response$data4.requests)||[];}async matchRequest(requestId,volunteerId){const response=await this.post(\"/requests/\".concat(requestId,\"/assign/\").concat(volunteerId));return response.data;}async completeRequest(requestId){let payload=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const response=await this.post(\"/requests/\".concat(requestId,\"/complete\"),payload);return response.data;}async applyForRequest(requestId){let message=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';const response=await this.post(\"/requests/\".concat(requestId,\"/apply\"),{message});return response;}async cancelApplication(requestId){const response=await this.delete(\"/requests/\".concat(requestId,\"/apply\"));return response;}async rejectRequest(requestId){let reason=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';const response=await this.post(\"/requests/\".concat(requestId,\"/reject\"),{reason});return response;}async login(loginData){const response=await this.post('/auth/login',loginData);if(response.data&&response.data.token){this.setToken(response.data.token);}return response;}async register(userData){const response=await this.post('/auth/register',userData);if(response.token){this.setToken(response.token);}return response;}async logout(){this.setToken(null);}async getCurrentUser(){const response=await this.get('/auth/me');return response.data;}async getAdminStats(){const response=await this.get('/admin/stats');return response.data;}async getAdminActivities(){const response=await this.get('/admin/activities');return response.data||[];}async searchRequests(){let filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const queryParams=new URLSearchParams();Object.entries(filters).forEach(_ref3=>{let[key,value]=_ref3;if(value!==undefined&&value!==null&&value!==''){queryParams.append(key,value);}});const endpoint=\"/requests/search\".concat(queryParams.toString()?\"?\".concat(queryParams):'');const response=await this.get(endpoint);return response.data||[];}async getShortlists(userId){const response=await this.get(\"/users/\".concat(userId,\"/shortlist\"));return response.data||[];}async addToShortlist(userId,requestId){const response=await this.post(\"/users/\".concat(userId,\"/shortlist\"),{requestId});return response.data;}async removeFromShortlist(userId,requestId){await this.delete(\"/users/\".concat(userId,\"/shortlist/\").concat(requestId));}}const apiService=new ApiService();export default apiService;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}