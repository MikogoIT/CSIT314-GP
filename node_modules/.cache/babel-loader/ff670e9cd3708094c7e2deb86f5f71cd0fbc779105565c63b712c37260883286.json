{"ast":null,"code":"import React from'react';import{Link}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import{useLanguage}from'../../context/LanguageContext';import LanguageSwitcher from'../Common/LanguageSwitcher';import{isSystemAdmin,isPlatformManager}from'../../utils/permissions';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Navbar=_ref=>{var _user$name;let{userType,user}=_ref;const{logout}=useAuth();const{t}=useLanguage();const handleLogout=()=>{logout();window.location.href='/login';};const getDashboardLink=()=>{switch(userType){case'pin':return'/pin/dashboard';case'csr':return'/csr/search';case'admin':return'/admin/dashboard';default:return'/login';}};return/*#__PURE__*/_jsx(\"nav\",{className:\"navbar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-container\",children:[/*#__PURE__*/_jsxs(Link,{to:getDashboardLink(),className:\"nav-brand\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nav-brand-icon\",children:\"C\"}),t('app.title')]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-main\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"nav-links\",children:[userType==='pin'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/pin/dashboard\",className:\"nav-link\",children:t('nav.pin.dashboard')})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/pin/history\",className:\"nav-link\",children:t('nav.pin.history')})})]}),userType==='csr'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/csr/search\",className:\"nav-link\",children:t('nav.csr.search')})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/csr/shortlist\",className:\"nav-link\",children:t('nav.csr.shortlist')})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/csr/history\",className:\"nav-link\",children:t('nav.csr.history')})})]}),(userType==='system_admin'||userType==='platform_manager')&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/admin/dashboard\",className:\"nav-link\",children:t('nav.admin.dashboard')})}),isSystemAdmin(user)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/admin/users\",className:\"nav-link\",children:t('nav.admin.users')||'User Management'})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/admin/system-logs\",className:\"nav-link\",children:t('nav.admin.systemLogs')||'System Logs'})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/admin/alerts\",className:\"nav-link\",children:t('nav.admin.alerts')||'Alerts'})})]}),isPlatformManager(user)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/admin/categories\",className:\"nav-link\",children:t('nav.admin.categories')||'Categories'})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/admin/reports\",className:\"nav-link\",children:t('nav.admin.reports')||'Reports'})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/admin/performance\",className:\"nav-link\",children:t('nav.admin.performance')||'CSR Performance'})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-user\",children:[/*#__PURE__*/_jsx(LanguageSwitcher,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile-section\",children:[/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:\"user-avatar\",title:t('nav.viewProfile')||'查看个人资料',children:user!==null&&user!==void 0&&user.avatar?/*#__PURE__*/_jsx(\"img\",{src:user.avatar,alt:\"Avatar\",className:\"avatar-image\"}):/*#__PURE__*/_jsx(\"span\",{className:\"avatar-text\",children:(user===null||user===void 0?void 0:(_user$name=user.name)===null||_user$name===void 0?void 0:_user$name.charAt(0))||'U'})}),/*#__PURE__*/_jsx(\"div\",{className:\"user-info\",children:/*#__PURE__*/_jsx(\"div\",{className:\"user-name\",children:(user===null||user===void 0?void 0:user.name)||t('nav.profile')})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"btn btn-secondary\",children:t('nav.logout')})]})]})]})});};export default Navbar;","map":{"version":3,"names":["React","Link","useAuth","useLanguage","LanguageSwitcher","isSystemAdmin","isPlatformManager","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Navbar","_ref","_user$name","userType","user","logout","t","handleLogout","window","location","href","getDashboardLink","className","children","to","title","avatar","src","alt","name","charAt","onClick"],"sources":["D:/Study/Git/CSIT314-GP/src/components/Layout/Navbar.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useLanguage } from '../../context/LanguageContext';\r\nimport LanguageSwitcher from '../Common/LanguageSwitcher';\r\nimport { isSystemAdmin, isPlatformManager } from '../../utils/permissions';\r\n\r\nconst Navbar = ({ userType, user }) => {\r\n  const { logout } = useAuth();\r\n  const { t } = useLanguage();\r\n  \r\n  const handleLogout = () => {\r\n    logout();\r\n    window.location.href = '/login';\r\n  };\r\n\r\n  const getDashboardLink = () => {\r\n    switch (userType) {\r\n      case 'pin':\r\n        return '/pin/dashboard';\r\n      case 'csr':\r\n        return '/csr/search';\r\n      case 'admin':\r\n        return '/admin/dashboard';\r\n      default:\r\n        return '/login';\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <nav className=\"navbar\">\r\n      <div className=\"navbar-container\">\r\n        <Link to={getDashboardLink()} className=\"nav-brand\">\r\n          <div className=\"nav-brand-icon\">C</div>\r\n          {t('app.title')}\r\n        </Link>\r\n        \r\n        <div className=\"nav-main\">\r\n          <ul className=\"nav-links\">\r\n            {userType === 'pin' && (\r\n              <>\r\n                <li><Link to=\"/pin/dashboard\" className=\"nav-link\">{t('nav.pin.dashboard')}</Link></li>\r\n                <li><Link to=\"/pin/history\" className=\"nav-link\">{t('nav.pin.history')}</Link></li>\r\n              </>\r\n            )}\r\n            \r\n            {userType === 'csr' && (\r\n              <>\r\n                <li><Link to=\"/csr/search\" className=\"nav-link\">{t('nav.csr.search')}</Link></li>\r\n                <li><Link to=\"/csr/shortlist\" className=\"nav-link\">{t('nav.csr.shortlist')}</Link></li>\r\n                <li><Link to=\"/csr/history\" className=\"nav-link\">{t('nav.csr.history')}</Link></li>\r\n              </>\r\n            )}\r\n            \r\n            {(userType === 'system_admin' || userType === 'platform_manager') && (\r\n              <>\r\n                <li><Link to=\"/admin/dashboard\" className=\"nav-link\">{t('nav.admin.dashboard')}</Link></li>\r\n                \r\n                {/* System Admin 专属菜单 */}\r\n                {isSystemAdmin(user) && (\r\n                  <>\r\n                    <li><Link to=\"/admin/users\" className=\"nav-link\">{t('nav.admin.users') || 'User Management'}</Link></li>\r\n                    <li><Link to=\"/admin/system-logs\" className=\"nav-link\">{t('nav.admin.systemLogs') || 'System Logs'}</Link></li>\r\n                    <li><Link to=\"/admin/alerts\" className=\"nav-link\">{t('nav.admin.alerts') || 'Alerts'}</Link></li>\r\n                  </>\r\n                )}\r\n                \r\n                {/* Platform Manager 专属菜单 */}\r\n                {isPlatformManager(user) && (\r\n                  <>\r\n                    <li><Link to=\"/admin/categories\" className=\"nav-link\">{t('nav.admin.categories') || 'Categories'}</Link></li>\r\n                    <li><Link to=\"/admin/reports\" className=\"nav-link\">{t('nav.admin.reports') || 'Reports'}</Link></li>\r\n                    <li><Link to=\"/admin/performance\" className=\"nav-link\">{t('nav.admin.performance') || 'CSR Performance'}</Link></li>\r\n                  </>\r\n                )}\r\n              </>\r\n            )}\r\n          </ul>\r\n          \r\n          <div className=\"nav-user\">\r\n            <LanguageSwitcher />\r\n            <div className=\"user-profile-section\">\r\n              <Link to=\"/profile\" className=\"user-avatar\" title={t('nav.viewProfile') || '查看个人资料'}>\r\n                {user?.avatar ? (\r\n                  <img src={user.avatar} alt=\"Avatar\" className=\"avatar-image\" />\r\n                ) : (\r\n                  <span className=\"avatar-text\">{user?.name?.charAt(0) || 'U'}</span>\r\n                )}\r\n              </Link>\r\n              <div className=\"user-info\">\r\n                <div className=\"user-name\">{user?.name || t('nav.profile')}</div>\r\n              </div>\r\n            </div>\r\n            <button onClick={handleLogout} className=\"btn btn-secondary\">\r\n              {t('nav.logout')}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navbar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}