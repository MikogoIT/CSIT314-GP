{"ast":null,"code":"// 6. CSR收藏夹页面\n// src/pages/CSR/Shortlist.jsx\nimport React,{useState,useEffect}from'react';import{useAuth}from'../../context/AuthContext';import{useLanguage}from'../../context/LanguageContext';import Navbar from'../../components/Layout/Navbar';import RequestDetailModal from'../../components/PIN/RequestDetailModal';import'../../styles/shortlist.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CSRShortlist=()=>{const{user}=useAuth();const{t}=useLanguage();const[shortlistedRequests,setShortlistedRequests]=useState([]);const[showRequestDetail,setShowRequestDetail]=useState(null);useEffect(()=>{if(user!==null&&user!==void 0&&user.id){const savedShortlist=JSON.parse(localStorage.getItem(\"shortlist_\".concat(user.id))||'[]');setShortlistedRequests(savedShortlist);}},[user===null||user===void 0?void 0:user.id]);const handleRemoveFromShortlist=requestId=>{if(window.confirm('确定要从收藏夹中移除这项请求吗？')){const updatedShortlist=shortlistedRequests.filter(req=>req.requestId!==requestId);setShortlistedRequests(updatedShortlist);localStorage.setItem(\"shortlist_\".concat(user.id),JSON.stringify(updatedShortlist));}};const handleViewDetail=request=>{setShowRequestDetail(request);};const getCategoryText=category=>{// Use translation system for consistent category names\nreturn t(\"category.\".concat(category))||category;};const getUrgencyText=urgency=>{const urgencyMap={low:'低',medium:'中',high:'高',urgent:'紧急'};return urgencyMap[urgency]||urgency;};const getUrgencyColor=urgency=>{const colorMap={low:'success',medium:'warning',high:'danger',urgent:'critical'};return colorMap[urgency]||'default';};return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container\",children:[/*#__PURE__*/_jsx(Navbar,{userType:\"csr\",user:user}),/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"shortlist-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:t('csr.shortlist.title')}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"\\u7BA1\\u7406\\u60A8\\u6536\\u85CF\\u7684\\u5FD7\\u613F\\u670D\\u52A1\\u673A\\u4F1A\"})]})}),shortlistedRequests.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"shortlist-grid\",children:shortlistedRequests.map(shortlistItem=>{var _request$location;const request=shortlistItem.request||shortlistItem;return/*#__PURE__*/_jsxs(\"div\",{className:\"request-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"request-title\",children:request.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"request-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"category-badge\",children:getCategoryText(request.category)}),/*#__PURE__*/_jsx(\"span\",{className:\"urgency-badge urgency-\".concat(getUrgencyColor(request.urgency)),children:getUrgencyText(request.urgency)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"request-description\",children:request.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"request-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"location\",children:[\"\\uD83D\\uDCCD \",((_request$location=request.location)===null||_request$location===void 0?void 0:_request$location.address)||request.location||'待确定']}),request.expectedDate&&/*#__PURE__*/_jsxs(\"div\",{className:\"timing\",children:[\"\\uD83D\\uDD52 \",new Date(request.expectedDate).toLocaleDateString('zh-CN'),request.expectedTime&&\" \".concat(request.expectedTime)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shortlisted-date\",children:[\"\\u2B50 \\u6536\\u85CF\\u4E8E: \",new Date(shortlistItem.shortlistedAt).toLocaleDateString('zh-CN')]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>handleViewDetail(request),children:\"\\u67E5\\u770B\\u8BE6\\u60C5\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>handleRemoveFromShortlist(shortlistItem.requestId),children:\"\\u79FB\\u9664\\u6536\\u85CF\"})]})]},shortlistItem.id);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-state-icon\",children:\"\\u2B50\"}),/*#__PURE__*/_jsx(\"div\",{className:\"empty-state-title\",children:\"\\u6536\\u85CF\\u5939\\u4E3A\\u7A7A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state-description\",children:[\"\\u60A8\\u8FD8\\u6CA1\\u6709\\u6536\\u85CF\\u4EFB\\u4F55\\u5FD7\\u613F\\u670D\\u52A1\\u673A\\u4F1A\\u3002\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u53BB\\u641C\\u7D22\\u9875\\u9762\\u627E\\u5230\\u611F\\u5174\\u8DA3\\u7684\\u9879\\u76EE\\u5E76\\u6DFB\\u52A0\\u5230\\u6536\\u85CF\\u5939\\u5427\\uFF01\"]}),/*#__PURE__*/_jsx(\"a\",{href:\"/csr/search\",className:\"btn btn-primary\",children:\"\\u6D4F\\u89C8\\u5FD7\\u613F\\u673A\\u4F1A\"})]})]})}),showRequestDetail&&/*#__PURE__*/_jsx(RequestDetailModal,{request:showRequestDetail,onClose:()=>setShowRequestDetail(null)})]});};export default CSRShortlist;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}