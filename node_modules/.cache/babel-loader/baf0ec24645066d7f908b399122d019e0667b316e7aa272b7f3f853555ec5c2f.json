{"ast":null,"code":"import apiService from './apiService';\nexport class DataService {\n  static isCacheValid(key) {\n    const lastFetch = this.cache.lastFetch[key];\n    return lastFetch && Date.now() - lastFetch < this.CACHE_DURATION;\n  }\n  static updateCache(key, data) {\n    this.cache[key] = data;\n    this.cache.lastFetch[key] = Date.now();\n  }\n  static clearCache(key = null) {\n    if (key) {\n      this.cache[key] = null;\n      delete this.cache.lastFetch[key];\n    } else {\n      this.cache = {\n        categories: null,\n        users: null,\n        requests: null,\n        shortlists: null,\n        lastFetch: {}\n      };\n    }\n  }\n  static async getCategories() {\n    try {\n      if (this.isCacheValid('categories') && this.cache.categories) {\n        return this.cache.categories;\n      }\n      const categories = await apiService.getCategories();\n      if (!Array.isArray(categories)) {\n        throw new Error('Invalid category data format');\n      }\n      const formattedCategories = categories.map(cat => ({\n        id: cat.name || cat._id,\n        _id: cat._id,\n        name: cat.name,\n        displayName: cat.displayName,\n        icon: cat.icon || 'üìÅ',\n        color: this.getColorFromHex(cat.color || '#42a5f5')\n      }));\n      this.updateCache('categories', formattedCategories);\n      return formattedCategories;\n    } catch (error) {\n      console.error('Failed to load categories, using defaults:', error);\n      const defaultCategories = [{\n        id: 'medical',\n        name: 'medical',\n        displayName: 'Medical',\n        icon: 'üè•',\n        color: 'danger'\n      }, {\n        id: 'transportation',\n        name: 'transportation',\n        displayName: 'Transportation',\n        icon: 'üöó',\n        color: 'primary'\n      }, {\n        id: 'shopping',\n        name: 'shopping',\n        displayName: 'Shopping',\n        icon: 'üõí',\n        color: 'warning'\n      }, {\n        id: 'household',\n        name: 'household',\n        displayName: 'Household',\n        icon: 'üè†',\n        color: 'success'\n      }, {\n        id: 'companion',\n        name: 'companion',\n        displayName: 'Companion',\n        icon: 'üë•',\n        color: 'info'\n      }, {\n        id: 'technology',\n        name: 'technology',\n        displayName: 'Technology',\n        icon: 'üíª',\n        color: 'secondary'\n      }, {\n        id: 'education',\n        name: 'education',\n        displayName: 'Education',\n        icon: 'üìö',\n        color: 'primary'\n      }, {\n        id: 'other',\n        name: 'other',\n        displayName: 'Other',\n        icon: 'üìù',\n        color: 'default'\n      }];\n      this.updateCache('categories', defaultCategories);\n      return defaultCategories;\n    }\n  }\n  static getColorFromHex(hexColor) {\n    const colorMap = {\n      '#ff4757': 'danger',\n      '#ffa726': 'warning',\n      '#42a5f5': 'primary',\n      '#66bb6a': 'success',\n      '#ab47bc': 'info',\n      '#26c6da': 'secondary'\n    };\n    return colorMap[hexColor] || 'primary';\n  }\n  static getUrgencyLevels() {\n    return [{\n      id: 'low',\n      name: 'urgency.low',\n      color: 'success'\n    }, {\n      id: 'medium',\n      name: 'urgency.medium',\n      color: 'warning'\n    }, {\n      id: 'high',\n      name: 'urgency.high',\n      color: 'danger'\n    }, {\n      id: 'urgent',\n      name: 'urgency.urgent',\n      color: 'critical'\n    }];\n  }\n  static getStatusOptions() {\n    return [{\n      id: 'pending',\n      name: 'status.pending',\n      color: 'warning'\n    }, {\n      id: 'matched',\n      name: 'status.matched',\n      color: 'success'\n    }, {\n      id: 'completed',\n      name: 'status.completed',\n      color: 'info'\n    }, {\n      id: 'cancelled',\n      name: 'status.cancelled',\n      color: 'danger'\n    }];\n  }\n  static async getUsers() {\n    try {\n      const currentUser = JSON.parse(localStorage.getItem('user') || '{}');\n      if (currentUser.userType !== 'system_admin' && currentUser.userType !== 'platform_manager') {\n        console.warn('getUsers() requires admin permissions');\n        return [];\n      }\n      if (this.isCacheValid('users') && this.cache.users) {\n        return this.cache.users;\n      }\n      const users = await apiService.getAllUsers();\n      this.updateCache('users', users);\n      return users;\n    } catch (error) {\n      console.error('Failed to load users:', error);\n      return [];\n    }\n  }\n  static async getRequests() {\n    try {\n      if (this.isCacheValid('requests') && this.cache.requests) {\n        return this.cache.requests;\n      }\n      const currentUser = JSON.parse(localStorage.getItem('user') || '{}');\n      let requests = [];\n      if (currentUser.userType === 'system_admin' || currentUser.userType === 'platform_manager') {\n        const allRequests = await apiService.getAllRequests();\n        requests = allRequests || [];\n      } else {\n        // ÊôÆÈÄöÁî®Êà∑‰ΩøÁî®getRequestsÔºåÂêéÁ´Ø‰ºöÊ†πÊçÆÁî®Êà∑Á±ªÂûãËøáÊª§\n        const response = await apiService.getRequests();\n        requests = response.requests || response || [];\n      }\n\n      // ËΩ¨Êç¢Êï∞ÊçÆÊ†ºÂºè‰ª•ÂÖºÂÆπÁé∞Êúâ‰ª£Á†Å\n      const formattedRequests = requests.map(req => {\n        var _req$category, _req$requester, _req$requester2, _req$requesterId, _req$requester3, _req$requesterId2, _req$requester4, _req$requesterId3, _req$requester5, _req$requesterId4, _req$assignedVoluntee, _req$stats, _req$stats2;\n        // Â§ÑÁêÜÂ∑≤ÂàÜÈÖçÁöÑÂøóÊÑøËÄÖ‰ø°ÊÅØ\n        const assignedVolunteers = req.assignedVolunteers || [];\n        const volunteersList = assignedVolunteers.map(av => {\n          var _av$volunteer, _av$volunteer2, _av$volunteer3, _av$volunteer4;\n          return {\n            id: ((_av$volunteer = av.volunteer) === null || _av$volunteer === void 0 ? void 0 : _av$volunteer._id) || av.volunteer,\n            name: ((_av$volunteer2 = av.volunteer) === null || _av$volunteer2 === void 0 ? void 0 : _av$volunteer2.name) || 'Unknown',\n            email: (_av$volunteer3 = av.volunteer) === null || _av$volunteer3 === void 0 ? void 0 : _av$volunteer3.email,\n            phone: (_av$volunteer4 = av.volunteer) === null || _av$volunteer4 === void 0 ? void 0 : _av$volunteer4.phone,\n            assignedAt: av.assignedAt,\n            completedAt: av.completedAt,\n            rating: av.rating,\n            feedback: av.feedback\n          };\n        });\n        const interestedVolunteers = req.interestedVolunteers || [];\n        const interestedList = interestedVolunteers.map(iv => {\n          var _iv$volunteer, _iv$volunteer2, _iv$volunteer3, _iv$volunteer4;\n          return {\n            id: ((_iv$volunteer = iv.volunteer) === null || _iv$volunteer === void 0 ? void 0 : _iv$volunteer._id) || iv.volunteer,\n            name: ((_iv$volunteer2 = iv.volunteer) === null || _iv$volunteer2 === void 0 ? void 0 : _iv$volunteer2.name) || 'Unknown',\n            email: (_iv$volunteer3 = iv.volunteer) === null || _iv$volunteer3 === void 0 ? void 0 : _iv$volunteer3.email,\n            phone: (_iv$volunteer4 = iv.volunteer) === null || _iv$volunteer4 === void 0 ? void 0 : _iv$volunteer4.phone,\n            message: iv.message,\n            appliedAt: iv.appliedAt\n          };\n        });\n        const rejectedVolunteers = req.rejectedVolunteers || [];\n        const rejectedList = rejectedVolunteers.map(rv => {\n          var _rv$volunteer;\n          return {\n            volunteer: ((_rv$volunteer = rv.volunteer) === null || _rv$volunteer === void 0 ? void 0 : _rv$volunteer._id) || rv.volunteer,\n            rejectedAt: rv.rejectedAt,\n            reason: rv.reason\n          };\n        });\n        return {\n          id: req._id,\n          title: req.title,\n          description: req.description,\n          category: ((_req$category = req.category) === null || _req$category === void 0 ? void 0 : _req$category.name) || req.category,\n          urgency: req.urgency,\n          location: req.location,\n          expectedDate: req.expectedDate ? new Date(req.expectedDate).toISOString().split('T')[0] : null,\n          expectedTime: req.expectedTime,\n          volunteersNeeded: req.volunteersNeeded,\n          status: req.status,\n          requesterId: ((_req$requester = req.requester) === null || _req$requester === void 0 ? void 0 : _req$requester._id) || req.requesterId || req.requester,\n          requesterName: ((_req$requester2 = req.requester) === null || _req$requester2 === void 0 ? void 0 : _req$requester2.name) || ((_req$requesterId = req.requesterId) === null || _req$requesterId === void 0 ? void 0 : _req$requesterId.name) || req.requesterName || 'Unknown',\n          requesterEmail: ((_req$requester3 = req.requester) === null || _req$requester3 === void 0 ? void 0 : _req$requester3.email) || ((_req$requesterId2 = req.requesterId) === null || _req$requesterId2 === void 0 ? void 0 : _req$requesterId2.email) || req.requesterEmail,\n          requesterPhone: ((_req$requester4 = req.requester) === null || _req$requester4 === void 0 ? void 0 : _req$requester4.phone) || ((_req$requesterId3 = req.requesterId) === null || _req$requesterId3 === void 0 ? void 0 : _req$requesterId3.phone) || req.requesterPhone,\n          requesterAddress: ((_req$requester5 = req.requester) === null || _req$requester5 === void 0 ? void 0 : _req$requester5.address) || ((_req$requesterId4 = req.requesterId) === null || _req$requesterId4 === void 0 ? void 0 : _req$requesterId4.address) || req.requesterAddress,\n          interestedVolunteers: interestedList,\n          rejectedVolunteers: rejectedList,\n          assignedVolunteers: volunteersList,\n          volunteer: volunteersList.length > 0 ? volunteersList[0].name : ((_req$assignedVoluntee = req.assignedVolunteer) === null || _req$assignedVoluntee === void 0 ? void 0 : _req$assignedVoluntee.name) || req.volunteer,\n          volunteerEmail: volunteersList.length > 0 ? volunteersList[0].email : null,\n          volunteerPhone: volunteersList.length > 0 ? volunteersList[0].phone : null,\n          viewCount: req.viewCount || ((_req$stats = req.stats) === null || _req$stats === void 0 ? void 0 : _req$stats.viewCount) || 0,\n          shortlistCount: req.shortlistCount || ((_req$stats2 = req.stats) === null || _req$stats2 === void 0 ? void 0 : _req$stats2.shortlistCount) || 0,\n          createdAt: req.createdAt,\n          matchedAt: req.matchedAt\n        };\n      });\n      this.updateCache('requests', formattedRequests);\n      return formattedRequests;\n    } catch (error) {\n      console.error('Failed to load requests:', error);\n      return [];\n    }\n  }\n  static async getRequestById(requestId) {\n    try {\n      const response = await apiService.getRequestById(requestId);\n      return response.request || response;\n    } catch (error) {\n      console.error('Failed to load request details:', error);\n      throw error;\n    }\n  }\n  static async getShortlists() {\n    try {\n      if (this.isCacheValid('shortlists') && this.cache.shortlists) {\n        return this.cache.shortlists;\n      }\n      const allShortlists = [];\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && key.startsWith('shortlist_')) {\n          try {\n            const shortlist = JSON.parse(localStorage.getItem(key));\n            if (Array.isArray(shortlist)) {\n              allShortlists.push(...shortlist);\n            }\n          } catch (parseError) {\n            console.warn(`Failed to parse shortlist data for key ${key}`);\n          }\n        }\n      }\n      this.updateCache('shortlists', allShortlists);\n      return allShortlists;\n    } catch (error) {\n      console.error('Failed to load shortlists:', error);\n      return [];\n    }\n  }\n  static async saveCategories(categories) {\n    try {\n      await apiService.updateCategory(categories);\n      this.clearCache('categories');\n    } catch (error) {\n      console.error('Failed to save categories:', error);\n      throw error;\n    }\n  }\n  static async saveUsers(users) {\n    try {\n      this.clearCache('users');\n    } catch (error) {\n      console.error('Failed to save users:', error);\n      throw error;\n    }\n  }\n  static async saveRequests(requests) {\n    try {\n      this.clearCache('requests');\n    } catch (error) {\n      console.error('Failed to save requests:', error);\n      throw error;\n    }\n  }\n  static async saveShortlists(shortlists) {\n    try {\n      this.clearCache('shortlists');\n    } catch (error) {\n      console.error('Failed to save shortlists:', error);\n      throw error;\n    }\n  }\n  static async getCategoryById(categoryId) {\n    try {\n      const categories = await this.getCategories();\n      const category = categories.find(cat => cat.id === categoryId);\n      return category || {\n        id: categoryId,\n        name: 'category.other',\n        icon: 'üìù'\n      };\n    } catch (error) {\n      console.error('Failed to get category:', error);\n      return {\n        id: categoryId,\n        name: 'category.other',\n        icon: 'üìù'\n      };\n    }\n  }\n  static getUrgencyById(urgencyId) {\n    const urgencyLevels = this.getUrgencyLevels();\n    return urgencyLevels.find(level => level.id === urgencyId) || {\n      id: urgencyId,\n      name: 'urgency.medium',\n      color: 'warning'\n    };\n  }\n  static getStatusById(statusId) {\n    const statuses = this.getStatusOptions();\n    return statuses.find(status => status.id === statusId) || {\n      id: statusId,\n      name: 'status.pending',\n      color: 'warning'\n    };\n  }\n  static async getUserRequests(userId) {\n    try {\n      const requests = await apiService.getUserRequests(userId);\n      console.log('DataService - Original request data:', requests);\n      if (!Array.isArray(requests)) {\n        console.error('Request data is not an array:', requests);\n        return [];\n      }\n      const mappedRequests = requests.map(req => {\n        var _req$location, _req$requester6, _req$requester7, _req$requester8, _req$requester9, _req$assignedVoluntee2, _req$assignedVoluntee3, _req$assignedVoluntee4, _req$stats3, _req$stats4;\n        const interestedVolunteers = req.interestedVolunteers || [];\n        console.log(`Request ${req._id} - interestedVolunteers:`, interestedVolunteers);\n        const interestedList = interestedVolunteers.map(iv => {\n          var _iv$volunteer5, _iv$volunteer6, _iv$volunteer7, _iv$volunteer8;\n          return {\n            id: ((_iv$volunteer5 = iv.volunteer) === null || _iv$volunteer5 === void 0 ? void 0 : _iv$volunteer5._id) || iv.volunteer,\n            name: ((_iv$volunteer6 = iv.volunteer) === null || _iv$volunteer6 === void 0 ? void 0 : _iv$volunteer6.name) || 'Unknown',\n            email: (_iv$volunteer7 = iv.volunteer) === null || _iv$volunteer7 === void 0 ? void 0 : _iv$volunteer7.email,\n            phone: (_iv$volunteer8 = iv.volunteer) === null || _iv$volunteer8 === void 0 ? void 0 : _iv$volunteer8.phone,\n            message: iv.message,\n            appliedAt: iv.appliedAt\n          };\n        });\n        console.log(`Request ${req._id} - Â§ÑÁêÜÂêéÁöÑÁî≥ËØ∑ËÄÖ:`, interestedList);\n        return {\n          id: req._id,\n          title: req.title,\n          description: req.description,\n          category: req.category,\n          urgency: req.urgency,\n          location: ((_req$location = req.location) === null || _req$location === void 0 ? void 0 : _req$location.address) || req.location,\n          expectedDate: req.expectedDate ? new Date(req.expectedDate).toISOString().split('T')[0] : null,\n          expectedTime: req.expectedTime,\n          volunteersNeeded: req.volunteersNeeded,\n          status: req.status,\n          contactMethod: req.contactMethod,\n          additionalNotes: req.additionalNotes,\n          requesterId: ((_req$requester6 = req.requester) === null || _req$requester6 === void 0 ? void 0 : _req$requester6._id) || req.requesterId,\n          requesterName: ((_req$requester7 = req.requester) === null || _req$requester7 === void 0 ? void 0 : _req$requester7.name) || req.requesterName,\n          requesterEmail: ((_req$requester8 = req.requester) === null || _req$requester8 === void 0 ? void 0 : _req$requester8.email) || req.requesterEmail,\n          requesterPhone: ((_req$requester9 = req.requester) === null || _req$requester9 === void 0 ? void 0 : _req$requester9.phone) || req.requesterPhone,\n          volunteer: ((_req$assignedVoluntee2 = req.assignedVolunteers) === null || _req$assignedVoluntee2 === void 0 ? void 0 : (_req$assignedVoluntee3 = _req$assignedVoluntee2[0]) === null || _req$assignedVoluntee3 === void 0 ? void 0 : (_req$assignedVoluntee4 = _req$assignedVoluntee3.volunteer) === null || _req$assignedVoluntee4 === void 0 ? void 0 : _req$assignedVoluntee4.name) || req.volunteer,\n          interestedVolunteers: interestedList,\n          viewCount: ((_req$stats3 = req.stats) === null || _req$stats3 === void 0 ? void 0 : _req$stats3.viewCount) || req.viewCount || 0,\n          shortlistCount: ((_req$stats4 = req.stats) === null || _req$stats4 === void 0 ? void 0 : _req$stats4.shortlistCount) || req.shortlistCount || 0,\n          createdAt: req.createdAt,\n          matchedAt: req.matchedAt\n        };\n      });\n      return mappedRequests;\n    } catch (error) {\n      console.error('Failed to load user requests:', error);\n      return [];\n    }\n  }\n  static async getUserShortlists(userId) {\n    try {\n      const savedShortlist = localStorage.getItem(`shortlist_${userId}`);\n      return savedShortlist ? JSON.parse(savedShortlist) : [];\n    } catch (error) {\n      console.error('Failed to load user shortlists:', error);\n      return [];\n    }\n  }\n  static getTimeAgo(dateString, t = null) {\n    if (!dateString) return t ? t('common.unknown') : 'Êú™Áü•';\n    const now = new Date();\n    const past = new Date(dateString);\n    const diffInMinutes = Math.floor((now - past) / (1000 * 60));\n    const diffInHours = Math.floor(diffInMinutes / 60);\n    const diffInDays = Math.floor(diffInHours / 24);\n    if (diffInMinutes < 1) {\n      return t ? t('time.justNow') : 'ÂàöÂàö';\n    }\n    if (diffInMinutes < 60) {\n      return t ? t('time.minutesAgo', {\n        count: diffInMinutes\n      }) : `${diffInMinutes}ÂàÜÈíüÂâç`;\n    }\n    if (diffInHours < 24) {\n      return t ? t('time.hoursAgo', {\n        count: diffInHours\n      }) : `${diffInHours}Â∞èÊó∂Ââç`;\n    }\n    if (diffInDays < 7) {\n      return t ? t('time.daysAgo', {\n        count: diffInDays\n      }) : `${diffInDays}Â§©Ââç`;\n    }\n    const diffInWeeks = Math.floor(diffInDays / 7);\n    return t ? t('time.weeksAgo', {\n      count: diffInWeeks\n    }) : `${diffInWeeks}Âë®Ââç`;\n  }\n  static async initializeData() {\n    try {\n      const requests = await this.getRequests();\n      if (requests.length === 0) {\n        console.warn('No data in database. Please run backend initialization script:');\n        console.warn('cd backend && node generate-test-data.js');\n        console.warn('or use: npm run generate-data');\n      }\n    } catch (error) {\n      console.error('Failed to check database data:', error);\n    }\n  }\n  static filterRequests(requests, filters) {\n    return requests.filter(request => {\n      if (filters.searchText) {\n        const searchLower = filters.searchText.toLowerCase();\n        const matchesText = request.title.toLowerCase().includes(searchLower) || request.description.toLowerCase().includes(searchLower) || request.location.toLowerCase().includes(searchLower);\n        if (!matchesText) return false;\n      }\n\n      // ÂàÜÁ±ªËøáÊª§\n      if (filters.category && filters.category !== 'all') {\n        if (request.category !== filters.category) return false;\n      }\n\n      // Á¥ßÊÄ•Á®ãÂ∫¶ËøáÊª§\n      if (filters.urgency && filters.urgency !== 'all') {\n        if (request.urgency !== filters.urgency) return false;\n      }\n\n      // Áä∂ÊÄÅËøáÊª§\n      if (filters.status && filters.status !== 'all') {\n        if (request.status !== filters.status) return false;\n      }\n      return true;\n    });\n  }\n  static async getStatistics(userId = null) {\n    try {\n      const users = await this.getUsers();\n      const requests = await this.getRequests();\n      const shortlists = await this.getShortlists();\n      if (userId) {\n        const userRequests = requests.filter(r => r.requesterId === userId);\n        const userShortlists = shortlists.filter(s => s.userId === userId);\n        return {\n          totalRequests: userRequests.length,\n          matched: userRequests.filter(r => r.status === 'matched').length,\n          pending: userRequests.filter(r => r.status === 'pending').length,\n          completed: userRequests.filter(r => r.status === 'completed').length,\n          totalViews: userRequests.reduce((sum, r) => sum + (r.viewCount || 0), 0),\n          totalShortlists: userShortlists.length\n        };\n      } else {\n        return {\n          totalUsers: users.length,\n          activeUsers: users.filter(u => u.status === 'active').length,\n          totalRequests: requests.length,\n          activeRequests: requests.filter(r => r.status === 'pending' || r.status === 'matched').length,\n          matchedRequests: requests.filter(r => r.status === 'matched').length,\n          completedRequests: requests.filter(r => r.status === 'completed').length,\n          totalShortlists: shortlists.length\n        };\n      }\n    } catch (error) {\n      console.error('Failed to load statistics:', error);\n      return {\n        totalUsers: 0,\n        activeUsers: 0,\n        totalRequests: 0,\n        activeRequests: 0,\n        matchedRequests: 0,\n        completedRequests: 0,\n        totalShortlists: 0\n      };\n    }\n  }\n  static async createRequest(requestData) {\n    try {\n      var _newRequest$category;\n      let result;\n      if (requestData.attachments && requestData.attachments.length) {\n        result = await apiService.createRequestWithFiles(requestData);\n      } else {\n        result = await apiService.createRequest(requestData);\n      }\n      this.clearCache('requests');\n      const newRequest = result.request || result;\n      return {\n        id: newRequest._id,\n        title: newRequest.title,\n        description: newRequest.description,\n        category: ((_newRequest$category = newRequest.category) === null || _newRequest$category === void 0 ? void 0 : _newRequest$category.name) || newRequest.category,\n        urgency: newRequest.urgency,\n        location: newRequest.location,\n        expectedDate: newRequest.expectedDate ? new Date(newRequest.expectedDate).toISOString().split('T')[0] : null,\n        expectedTime: newRequest.expectedTime,\n        volunteersNeeded: newRequest.volunteersNeeded,\n        status: newRequest.status,\n        requesterId: newRequest.requesterId,\n        createdAt: newRequest.createdAt\n      };\n    } catch (error) {\n      console.error('Failed to create request:', error);\n      throw error;\n    }\n  }\n  static async updateRequest(requestId, updateData) {\n    try {\n      const updatedRequest = await apiService.updateRequest(requestId, updateData);\n      this.clearCache('requests');\n      return updatedRequest;\n    } catch (error) {\n      console.error('Failed to update request:', error);\n      throw error;\n    }\n  }\n\n  // Âà†Èô§ËØ∑Ê±Ç\n  static async deleteRequest(requestId) {\n    try {\n      await apiService.deleteRequest(requestId);\n      this.clearCache('requests');\n    } catch (error) {\n      console.error('Failed to delete request:', error);\n      throw error;\n    }\n  }\n  static async completeRequest(requestId, update = {}) {\n    try {\n      const response = await apiService.completeRequest(requestId, update);\n      this.clearCache('requests');\n      return response;\n    } catch (error) {\n      console.error('Failed to complete request:', error);\n      throw error;\n    }\n  }\n  static async matchRequest(requestId, volunteerId) {\n    try {\n      const response = await apiService.matchRequest(requestId, volunteerId);\n      this.clearCache('requests');\n      return response;\n    } catch (error) {\n      console.error('Failed to match volunteer:', error);\n      throw error;\n    }\n  }\n  static async applyForRequest(requestId, message = '') {\n    try {\n      const response = await apiService.applyForRequest(requestId, message);\n      this.clearCache('requests');\n      return response;\n    } catch (error) {\n      console.error('Failed to apply for request:', error);\n      throw error;\n    }\n  }\n  static async cancelApplication(requestId) {\n    try {\n      const response = await apiService.cancelApplication(requestId);\n      this.clearCache('requests');\n      return response;\n    } catch (error) {\n      console.error('Failed to cancel application:', error);\n      throw error;\n    }\n  }\n  static async rejectRequest(requestId, reason = '') {\n    try {\n      const response = await apiService.rejectRequest(requestId, reason);\n      this.clearCache('requests');\n      return response;\n    } catch (error) {\n      console.error('Failed to reject request:', error);\n      throw error;\n    }\n  }\n  static async addToShortlist(requestId) {\n    try {\n      const result = await apiService.addToShortlist(requestId);\n      this.clearCache('shortlists');\n      return result;\n    } catch (error) {\n      console.error('Failed to add to shortlist:', error);\n      throw error;\n    }\n  }\n  static async removeFromShortlist(requestId) {\n    try {\n      await apiService.removeFromShortlist(requestId);\n      this.clearCache('shortlists');\n    } catch (error) {\n      console.error('Failed to remove from shortlist:', error);\n      throw error;\n    }\n  }\n  static async getRequestsByCategory(categoryId) {\n    try {\n      console.log('DataService.getRequestsByCategory called, categoryId:', categoryId);\n      const requests = await apiService.searchRequests({\n        category: categoryId\n      });\n      console.log('API search result:', requests);\n      if (!requests || requests.length === 0) {\n        console.log('No API results, trying local filter');\n        const allRequests = await this.getRequests();\n        const filteredRequests = (allRequests || []).filter(req => {\n          var _req$category2, _req$category3;\n          return req.category === categoryId || ((_req$category2 = req.category) === null || _req$category2 === void 0 ? void 0 : _req$category2.id) === categoryId || ((_req$category3 = req.category) === null || _req$category3 === void 0 ? void 0 : _req$category3.name) === categoryId;\n        });\n        console.log('Local filter result:', filteredRequests);\n        return filteredRequests;\n      }\n      return requests.map(req => {\n        var _req$category4, _req$requesterId5, _req$requesterId6;\n        return {\n          id: req._id,\n          title: req.title,\n          description: req.description,\n          category: ((_req$category4 = req.category) === null || _req$category4 === void 0 ? void 0 : _req$category4.name) || req.category,\n          urgency: req.urgency,\n          location: req.location,\n          expectedDate: req.expectedDate ? new Date(req.expectedDate).toISOString().split('T')[0] : null,\n          expectedTime: req.expectedTime,\n          volunteersNeeded: req.volunteersNeeded,\n          status: req.status,\n          requesterId: ((_req$requesterId5 = req.requesterId) === null || _req$requesterId5 === void 0 ? void 0 : _req$requesterId5._id) || req.requesterId,\n          requesterName: ((_req$requesterId6 = req.requesterId) === null || _req$requesterId6 === void 0 ? void 0 : _req$requesterId6.name) || req.requesterName,\n          createdAt: req.createdAt\n        };\n      });\n    } catch (error) {\n      console.error('Failed to get category requests:', error);\n      return [];\n    }\n  }\n}\nDataService.cache = {\n  categories: null,\n  users: null,\n  requests: null,\n  shortlists: null,\n  lastFetch: {}\n};\nDataService.CACHE_DURATION = 5 * 60 * 1000;","map":{"version":3,"names":["apiService","DataService","isCacheValid","key","lastFetch","cache","Date","now","CACHE_DURATION","updateCache","data","clearCache","categories","users","requests","shortlists","getCategories","Array","isArray","Error","formattedCategories","map","cat","id","name","_id","displayName","icon","color","getColorFromHex","error","console","defaultCategories","hexColor","colorMap","getUrgencyLevels","getStatusOptions","getUsers","currentUser","JSON","parse","localStorage","getItem","userType","warn","getAllUsers","getRequests","allRequests","getAllRequests","response","formattedRequests","req","_req$category","_req$requester","_req$requester2","_req$requesterId","_req$requester3","_req$requesterId2","_req$requester4","_req$requesterId3","_req$requester5","_req$requesterId4","_req$assignedVoluntee","_req$stats","_req$stats2","assignedVolunteers","volunteersList","av","_av$volunteer","_av$volunteer2","_av$volunteer3","_av$volunteer4","volunteer","email","phone","assignedAt","completedAt","rating","feedback","interestedVolunteers","interestedList","iv","_iv$volunteer","_iv$volunteer2","_iv$volunteer3","_iv$volunteer4","message","appliedAt","rejectedVolunteers","rejectedList","rv","_rv$volunteer","rejectedAt","reason","title","description","category","urgency","location","expectedDate","toISOString","split","expectedTime","volunteersNeeded","status","requesterId","requester","requesterName","requesterEmail","requesterPhone","requesterAddress","address","length","assignedVolunteer","volunteerEmail","volunteerPhone","viewCount","stats","shortlistCount","createdAt","matchedAt","getRequestById","requestId","request","getShortlists","allShortlists","i","startsWith","shortlist","push","parseError","saveCategories","updateCategory","saveUsers","saveRequests","saveShortlists","getCategoryById","categoryId","find","getUrgencyById","urgencyId","urgencyLevels","level","getStatusById","statusId","statuses","getUserRequests","userId","log","mappedRequests","_req$location","_req$requester6","_req$requester7","_req$requester8","_req$requester9","_req$assignedVoluntee2","_req$assignedVoluntee3","_req$assignedVoluntee4","_req$stats3","_req$stats4","_iv$volunteer5","_iv$volunteer6","_iv$volunteer7","_iv$volunteer8","contactMethod","additionalNotes","getUserShortlists","savedShortlist","getTimeAgo","dateString","t","past","diffInMinutes","Math","floor","diffInHours","diffInDays","count","diffInWeeks","initializeData","filterRequests","filters","filter","searchText","searchLower","toLowerCase","matchesText","includes","getStatistics","userRequests","r","userShortlists","s","totalRequests","matched","pending","completed","totalViews","reduce","sum","totalShortlists","totalUsers","activeUsers","u","activeRequests","matchedRequests","completedRequests","createRequest","requestData","_newRequest$category","result","attachments","createRequestWithFiles","newRequest","updateRequest","updateData","updatedRequest","deleteRequest","completeRequest","update","matchRequest","volunteerId","applyForRequest","cancelApplication","rejectRequest","addToShortlist","removeFromShortlist","getRequestsByCategory","searchRequests","filteredRequests","_req$category2","_req$category3","_req$category4","_req$requesterId5","_req$requesterId6"],"sources":["G:/Webb/CSIT314-GP/src/services/dataService.js"],"sourcesContent":["import apiService from './apiService';\r\n\r\nexport class DataService {\r\n  static cache = {\r\n    categories: null,\r\n    users: null,\r\n    requests: null,\r\n    shortlists: null,\r\n    lastFetch: {}\r\n  };\r\n\r\n  static CACHE_DURATION = 5 * 60 * 1000;\r\n\r\n  static isCacheValid(key) {\r\n    const lastFetch = this.cache.lastFetch[key];\r\n    return lastFetch && (Date.now() - lastFetch) < this.CACHE_DURATION;\r\n  }\r\n\r\n  static updateCache(key, data) {\r\n    this.cache[key] = data;\r\n    this.cache.lastFetch[key] = Date.now();\r\n  }\r\n\r\n  static clearCache(key = null) {\r\n    if (key) {\r\n      this.cache[key] = null;\r\n      delete this.cache.lastFetch[key];\r\n    } else {\r\n      this.cache = {\r\n        categories: null,\r\n        users: null,\r\n        requests: null,\r\n        shortlists: null,\r\n        lastFetch: {}\r\n      };\r\n    }\r\n  }\r\n\r\n  static async getCategories() {\r\n    try {\r\n      if (this.isCacheValid('categories') && this.cache.categories) {\r\n        return this.cache.categories;\r\n      }\r\n\r\n      const categories = await apiService.getCategories();\r\n      \r\n      if (!Array.isArray(categories)) {\r\n        throw new Error('Invalid category data format');\r\n      }\r\n      \r\n      const formattedCategories = categories.map(cat => ({\r\n        id: cat.name || cat._id,\r\n        _id: cat._id,\r\n        name: cat.name,\r\n        displayName: cat.displayName,\r\n        icon: cat.icon || 'üìÅ',\r\n        color: this.getColorFromHex(cat.color || '#42a5f5')\r\n      }));\r\n\r\n      this.updateCache('categories', formattedCategories);\r\n      return formattedCategories;\r\n    } catch (error) {\r\n      console.error('Failed to load categories, using defaults:', error);\r\n      const defaultCategories = [\r\n        { id: 'medical', name: 'medical', displayName: 'Medical', icon: 'üè•', color: 'danger' },\r\n        { id: 'transportation', name: 'transportation', displayName: 'Transportation', icon: 'üöó', color: 'primary' },\r\n        { id: 'shopping', name: 'shopping', displayName: 'Shopping', icon: 'üõí', color: 'warning' },\r\n        { id: 'household', name: 'household', displayName: 'Household', icon: 'üè†', color: 'success' },\r\n        { id: 'companion', name: 'companion', displayName: 'Companion', icon: 'üë•', color: 'info' },\r\n        { id: 'technology', name: 'technology', displayName: 'Technology', icon: 'üíª', color: 'secondary' },\r\n        { id: 'education', name: 'education', displayName: 'Education', icon: 'üìö', color: 'primary' },\r\n        { id: 'other', name: 'other', displayName: 'Other', icon: 'üìù', color: 'default' }\r\n      ];\r\n      this.updateCache('categories', defaultCategories);\r\n      return defaultCategories;\r\n    }\r\n  }\r\n\r\n  static getColorFromHex(hexColor) {\r\n    const colorMap = {\r\n      '#ff4757': 'danger',\r\n      '#ffa726': 'warning', \r\n      '#42a5f5': 'primary',\r\n      '#66bb6a': 'success',\r\n      '#ab47bc': 'info',\r\n      '#26c6da': 'secondary'\r\n    };\r\n    return colorMap[hexColor] || 'primary';\r\n  }\r\n\r\n  static getUrgencyLevels() {\r\n    return [\r\n      { id: 'low', name: 'urgency.low', color: 'success' },\r\n      { id: 'medium', name: 'urgency.medium', color: 'warning' },\r\n      { id: 'high', name: 'urgency.high', color: 'danger' },\r\n      { id: 'urgent', name: 'urgency.urgent', color: 'critical' }\r\n    ];\r\n  }\r\n\r\n  static getStatusOptions() {\r\n    return [\r\n      { id: 'pending', name: 'status.pending', color: 'warning' },\r\n      { id: 'matched', name: 'status.matched', color: 'success' },\r\n      { id: 'completed', name: 'status.completed', color: 'info' },\r\n      { id: 'cancelled', name: 'status.cancelled', color: 'danger' }\r\n    ];\r\n  }\r\n\r\n  static async getUsers() {\r\n    try {\r\n      const currentUser = JSON.parse(localStorage.getItem('user') || '{}');\r\n      if (currentUser.userType !== 'system_admin' && currentUser.userType !== 'platform_manager') {\r\n        console.warn('getUsers() requires admin permissions');\r\n        return [];\r\n      }\r\n\r\n      if (this.isCacheValid('users') && this.cache.users) {\r\n        return this.cache.users;\r\n      }\r\n\r\n      const users = await apiService.getAllUsers();\r\n      this.updateCache('users', users);\r\n      return users;\r\n    } catch (error) {\r\n      console.error('Failed to load users:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  static async getRequests() {\r\n    try {\r\n      if (this.isCacheValid('requests') && this.cache.requests) {\r\n        return this.cache.requests;\r\n      }\r\n\r\n      const currentUser = JSON.parse(localStorage.getItem('user') || '{}');\r\n      let requests = [];\r\n      \r\n      if (currentUser.userType === 'system_admin' || currentUser.userType === 'platform_manager') {\r\n        const allRequests = await apiService.getAllRequests();\r\n        requests = allRequests || [];\r\n      } else {\r\n        // ÊôÆÈÄöÁî®Êà∑‰ΩøÁî®getRequestsÔºåÂêéÁ´Ø‰ºöÊ†πÊçÆÁî®Êà∑Á±ªÂûãËøáÊª§\r\n        const response = await apiService.getRequests();\r\n        requests = response.requests || response || [];\r\n      }\r\n      \r\n      // ËΩ¨Êç¢Êï∞ÊçÆÊ†ºÂºè‰ª•ÂÖºÂÆπÁé∞Êúâ‰ª£Á†Å\r\n      const formattedRequests = requests.map(req => {\r\n        // Â§ÑÁêÜÂ∑≤ÂàÜÈÖçÁöÑÂøóÊÑøËÄÖ‰ø°ÊÅØ\r\n        const assignedVolunteers = req.assignedVolunteers || [];\r\n        const volunteersList = assignedVolunteers.map(av => ({\r\n          id: av.volunteer?._id || av.volunteer,\r\n          name: av.volunteer?.name || 'Unknown',\r\n          email: av.volunteer?.email,\r\n          phone: av.volunteer?.phone,\r\n          assignedAt: av.assignedAt,\r\n          completedAt: av.completedAt,\r\n          rating: av.rating,\r\n          feedback: av.feedback\r\n        }));\r\n        \r\n        const interestedVolunteers = req.interestedVolunteers || [];\r\n        const interestedList = interestedVolunteers.map(iv => ({\r\n          id: iv.volunteer?._id || iv.volunteer,\r\n          name: iv.volunteer?.name || 'Unknown',\r\n          email: iv.volunteer?.email,\r\n          phone: iv.volunteer?.phone,\r\n          message: iv.message,\r\n          appliedAt: iv.appliedAt\r\n        }));\r\n        \r\n        const rejectedVolunteers = req.rejectedVolunteers || [];\r\n        const rejectedList = rejectedVolunteers.map(rv => ({\r\n          volunteer: rv.volunteer?._id || rv.volunteer,\r\n          rejectedAt: rv.rejectedAt,\r\n          reason: rv.reason\r\n        }));\r\n        \r\n        return {\r\n          id: req._id,\r\n          title: req.title,\r\n          description: req.description,\r\n          category: req.category?.name || req.category,\r\n          urgency: req.urgency,\r\n          location: req.location,\r\n          expectedDate: req.expectedDate ? new Date(req.expectedDate).toISOString().split('T')[0] : null,\r\n          expectedTime: req.expectedTime,\r\n          volunteersNeeded: req.volunteersNeeded,\r\n          status: req.status,\r\n          requesterId: req.requester?._id || req.requesterId || req.requester,\r\n          requesterName: req.requester?.name || req.requesterId?.name || req.requesterName || 'Unknown',\r\n          requesterEmail: req.requester?.email || req.requesterId?.email || req.requesterEmail,\r\n          requesterPhone: req.requester?.phone || req.requesterId?.phone || req.requesterPhone,\r\n          requesterAddress: req.requester?.address || req.requesterId?.address || req.requesterAddress,\r\n          interestedVolunteers: interestedList,\r\n          rejectedVolunteers: rejectedList,\r\n          assignedVolunteers: volunteersList,\r\n          volunteer: volunteersList.length > 0 ? volunteersList[0].name : (req.assignedVolunteer?.name || req.volunteer),\r\n          volunteerEmail: volunteersList.length > 0 ? volunteersList[0].email : null,\r\n          volunteerPhone: volunteersList.length > 0 ? volunteersList[0].phone : null,\r\n          viewCount: req.viewCount || req.stats?.viewCount || 0,\r\n          shortlistCount: req.shortlistCount || req.stats?.shortlistCount || 0,\r\n          createdAt: req.createdAt,\r\n          matchedAt: req.matchedAt\r\n        };\r\n      });\r\n\r\n      this.updateCache('requests', formattedRequests);\r\n      return formattedRequests;\r\n    } catch (error) {\r\n      console.error('Failed to load requests:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  static async getRequestById(requestId) {\r\n    try {\r\n      const response = await apiService.getRequestById(requestId);\r\n      return response.request || response;\r\n    } catch (error) {\r\n      console.error('Failed to load request details:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async getShortlists() {\r\n    try {\r\n      if (this.isCacheValid('shortlists') && this.cache.shortlists) {\r\n        return this.cache.shortlists;\r\n      }\r\n\r\n      const allShortlists = [];\r\n      for (let i = 0; i < localStorage.length; i++) {\r\n        const key = localStorage.key(i);\r\n        if (key && key.startsWith('shortlist_')) {\r\n          try {\r\n            const shortlist = JSON.parse(localStorage.getItem(key));\r\n            if (Array.isArray(shortlist)) {\r\n              allShortlists.push(...shortlist);\r\n            }\r\n          } catch (parseError) {\r\n            console.warn(`Failed to parse shortlist data for key ${key}`);\r\n          }\r\n        }\r\n      }\r\n      \r\n      this.updateCache('shortlists', allShortlists);\r\n      return allShortlists;\r\n    } catch (error) {\r\n      console.error('Failed to load shortlists:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  static async saveCategories(categories) {\r\n    try {\r\n      await apiService.updateCategory(categories);\r\n      this.clearCache('categories');\r\n    } catch (error) {\r\n      console.error('Failed to save categories:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async saveUsers(users) {\r\n    try {\r\n      this.clearCache('users');\r\n    } catch (error) {\r\n      console.error('Failed to save users:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async saveRequests(requests) {\r\n    try {\r\n      this.clearCache('requests');\r\n    } catch (error) {\r\n      console.error('Failed to save requests:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async saveShortlists(shortlists) {\r\n    try {\r\n      this.clearCache('shortlists');\r\n    } catch (error) {\r\n      console.error('Failed to save shortlists:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async getCategoryById(categoryId) {\r\n    try {\r\n      const categories = await this.getCategories();\r\n      const category = categories.find(cat => cat.id === categoryId);\r\n      return category || { id: categoryId, name: 'category.other', icon: 'üìù' };\r\n    } catch (error) {\r\n      console.error('Failed to get category:', error);\r\n      return { id: categoryId, name: 'category.other', icon: 'üìù' };\r\n    }\r\n  }\r\n\r\n  static getUrgencyById(urgencyId) {\r\n    const urgencyLevels = this.getUrgencyLevels();\r\n    return urgencyLevels.find(level => level.id === urgencyId) || \r\n           { id: urgencyId, name: 'urgency.medium', color: 'warning' };\r\n  }\r\n\r\n  static getStatusById(statusId) {\r\n    const statuses = this.getStatusOptions();\r\n    return statuses.find(status => status.id === statusId) || \r\n           { id: statusId, name: 'status.pending', color: 'warning' };\r\n  }\r\n\r\n  static async getUserRequests(userId) {\r\n    try {\r\n      const requests = await apiService.getUserRequests(userId);\r\n      \r\n      console.log('DataService - Original request data:', requests);\r\n      \r\n      if (!Array.isArray(requests)) {\r\n        console.error('Request data is not an array:', requests);\r\n        return [];\r\n      }\r\n      \r\n      const mappedRequests = requests.map(req => {\r\n        const interestedVolunteers = req.interestedVolunteers || [];\r\n        console.log(`Request ${req._id} - interestedVolunteers:`, interestedVolunteers);\r\n        \r\n        const interestedList = interestedVolunteers.map(iv => ({\r\n          id: iv.volunteer?._id || iv.volunteer,\r\n          name: iv.volunteer?.name || 'Unknown',\r\n          email: iv.volunteer?.email,\r\n          phone: iv.volunteer?.phone,\r\n          message: iv.message,\r\n          appliedAt: iv.appliedAt\r\n        }));\r\n        \r\n        console.log(`Request ${req._id} - Â§ÑÁêÜÂêéÁöÑÁî≥ËØ∑ËÄÖ:`, interestedList);\r\n        \r\n        return {\r\n          id: req._id,\r\n          title: req.title,\r\n          description: req.description,\r\n          category: req.category,\r\n          urgency: req.urgency,\r\n          location: req.location?.address || req.location,\r\n          expectedDate: req.expectedDate ? new Date(req.expectedDate).toISOString().split('T')[0] : null,\r\n          expectedTime: req.expectedTime,\r\n          volunteersNeeded: req.volunteersNeeded,\r\n          status: req.status,\r\n          contactMethod: req.contactMethod,\r\n          additionalNotes: req.additionalNotes,\r\n          requesterId: req.requester?._id || req.requesterId,\r\n          requesterName: req.requester?.name || req.requesterName,\r\n          requesterEmail: req.requester?.email || req.requesterEmail,\r\n          requesterPhone: req.requester?.phone || req.requesterPhone,\r\n          volunteer: req.assignedVolunteers?.[0]?.volunteer?.name || req.volunteer,\r\n          interestedVolunteers: interestedList,\r\n          viewCount: req.stats?.viewCount || req.viewCount || 0,\r\n          shortlistCount: req.stats?.shortlistCount || req.shortlistCount || 0,\r\n          createdAt: req.createdAt,\r\n          matchedAt: req.matchedAt\r\n        };\r\n      });\r\n      \r\n      return mappedRequests;\r\n    } catch (error) {\r\n      console.error('Failed to load user requests:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  static async getUserShortlists(userId) {\r\n    try {\r\n      const savedShortlist = localStorage.getItem(`shortlist_${userId}`);\r\n      return savedShortlist ? JSON.parse(savedShortlist) : [];\r\n    } catch (error) {\r\n      console.error('Failed to load user shortlists:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  static getTimeAgo(dateString, t = null) {\r\n    if (!dateString) return t ? t('common.unknown') : 'Êú™Áü•';\r\n    \r\n    const now = new Date();\r\n    const past = new Date(dateString);\r\n    const diffInMinutes = Math.floor((now - past) / (1000 * 60));\r\n    const diffInHours = Math.floor(diffInMinutes / 60);\r\n    const diffInDays = Math.floor(diffInHours / 24);\r\n    \r\n    if (diffInMinutes < 1) {\r\n      return t ? t('time.justNow') : 'ÂàöÂàö';\r\n    }\r\n    \r\n    if (diffInMinutes < 60) {\r\n      return t ? t('time.minutesAgo', { count: diffInMinutes }) : `${diffInMinutes}ÂàÜÈíüÂâç`;\r\n    }\r\n    \r\n    if (diffInHours < 24) {\r\n      return t ? t('time.hoursAgo', { count: diffInHours }) : `${diffInHours}Â∞èÊó∂Ââç`;\r\n    }\r\n    \r\n    if (diffInDays < 7) {\r\n      return t ? t('time.daysAgo', { count: diffInDays }) : `${diffInDays}Â§©Ââç`;\r\n    }\r\n    \r\n    const diffInWeeks = Math.floor(diffInDays / 7);\r\n    return t ? t('time.weeksAgo', { count: diffInWeeks }) : `${diffInWeeks}Âë®Ââç`;\r\n  }\r\n\r\n  static async initializeData() {\r\n    try {\r\n      const requests = await this.getRequests();\r\n      \r\n      if (requests.length === 0) {\r\n        console.warn('No data in database. Please run backend initialization script:');\r\n        console.warn('cd backend && node generate-test-data.js');\r\n        console.warn('or use: npm run generate-data');\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to check database data:', error);\r\n    }\r\n  }\r\n\r\n  static filterRequests(requests, filters) {\r\n    return requests.filter(request => {\r\n      if (filters.searchText) {\r\n        const searchLower = filters.searchText.toLowerCase();\r\n        const matchesText = \r\n          request.title.toLowerCase().includes(searchLower) ||\r\n          request.description.toLowerCase().includes(searchLower) ||\r\n          request.location.toLowerCase().includes(searchLower);\r\n        if (!matchesText) return false;\r\n      }\r\n\r\n      // ÂàÜÁ±ªËøáÊª§\r\n      if (filters.category && filters.category !== 'all') {\r\n        if (request.category !== filters.category) return false;\r\n      }\r\n\r\n      // Á¥ßÊÄ•Á®ãÂ∫¶ËøáÊª§\r\n      if (filters.urgency && filters.urgency !== 'all') {\r\n        if (request.urgency !== filters.urgency) return false;\r\n      }\r\n\r\n      // Áä∂ÊÄÅËøáÊª§\r\n      if (filters.status && filters.status !== 'all') {\r\n        if (request.status !== filters.status) return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n  }\r\n\r\n  static async getStatistics(userId = null) {\r\n    try {\r\n      const users = await this.getUsers();\r\n      const requests = await this.getRequests();\r\n      const shortlists = await this.getShortlists();\r\n\r\n      if (userId) {\r\n        const userRequests = requests.filter(r => r.requesterId === userId);\r\n        const userShortlists = shortlists.filter(s => s.userId === userId);\r\n        \r\n        return {\r\n          totalRequests: userRequests.length,\r\n          matched: userRequests.filter(r => r.status === 'matched').length,\r\n          pending: userRequests.filter(r => r.status === 'pending').length,\r\n          completed: userRequests.filter(r => r.status === 'completed').length,\r\n          totalViews: userRequests.reduce((sum, r) => sum + (r.viewCount || 0), 0),\r\n          totalShortlists: userShortlists.length\r\n        };\r\n      } else {\r\n        return {\r\n          totalUsers: users.length,\r\n          activeUsers: users.filter(u => u.status === 'active').length,\r\n          totalRequests: requests.length,\r\n          activeRequests: requests.filter(r => r.status === 'pending' || r.status === 'matched').length,\r\n          matchedRequests: requests.filter(r => r.status === 'matched').length,\r\n          completedRequests: requests.filter(r => r.status === 'completed').length,\r\n          totalShortlists: shortlists.length\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load statistics:', error);\r\n      return {\r\n        totalUsers: 0,\r\n        activeUsers: 0,\r\n        totalRequests: 0,\r\n        activeRequests: 0,\r\n        matchedRequests: 0,\r\n        completedRequests: 0,\r\n        totalShortlists: 0\r\n      };\r\n    }\r\n  }\r\n\r\n  static async createRequest(requestData) {\r\n    try {\r\n      let result;\r\n      if (requestData.attachments && requestData.attachments.length) {\r\n        result = await apiService.createRequestWithFiles(requestData);\r\n      } else {\r\n        result = await apiService.createRequest(requestData);\r\n      }\r\n      this.clearCache('requests');\r\n      \r\n      const newRequest = result.request || result;\r\n      \r\n      return {\r\n        id: newRequest._id,\r\n        title: newRequest.title,\r\n        description: newRequest.description,\r\n        category: newRequest.category?.name || newRequest.category,\r\n        urgency: newRequest.urgency,\r\n        location: newRequest.location,\r\n        expectedDate: newRequest.expectedDate ? new Date(newRequest.expectedDate).toISOString().split('T')[0] : null,\r\n        expectedTime: newRequest.expectedTime,\r\n        volunteersNeeded: newRequest.volunteersNeeded,\r\n        status: newRequest.status,\r\n        requesterId: newRequest.requesterId,\r\n        createdAt: newRequest.createdAt\r\n      };\r\n    } catch (error) {\r\n      console.error('Failed to create request:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async updateRequest(requestId, updateData) {\r\n    try {\r\n      const updatedRequest = await apiService.updateRequest(requestId, updateData);\r\n      this.clearCache('requests');\r\n      return updatedRequest;\r\n    } catch (error) {\r\n      console.error('Failed to update request:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Âà†Èô§ËØ∑Ê±Ç\r\n  static async deleteRequest(requestId) {\r\n    try {\r\n      await apiService.deleteRequest(requestId);\r\n      this.clearCache('requests');\r\n    } catch (error) {\r\n      console.error('Failed to delete request:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async completeRequest(requestId, update = {}) {\r\n    try {\r\n      const response = await apiService.completeRequest(requestId, update);\r\n      this.clearCache('requests');\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Failed to complete request:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async matchRequest(requestId, volunteerId) {\r\n    try {\r\n      const response = await apiService.matchRequest(requestId, volunteerId);\r\n      this.clearCache('requests');\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Failed to match volunteer:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async applyForRequest(requestId, message = '') {\r\n    try {\r\n      const response = await apiService.applyForRequest(requestId, message);\r\n      this.clearCache('requests');\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Failed to apply for request:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async cancelApplication(requestId) {\r\n    try {\r\n      const response = await apiService.cancelApplication(requestId);\r\n      this.clearCache('requests');\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Failed to cancel application:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async rejectRequest(requestId, reason = '') {\r\n    try {\r\n      const response = await apiService.rejectRequest(requestId, reason);\r\n      this.clearCache('requests');\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Failed to reject request:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async addToShortlist(requestId) {\r\n    try {\r\n      const result = await apiService.addToShortlist(requestId);\r\n      this.clearCache('shortlists');\r\n      return result;\r\n    } catch (error) {\r\n      console.error('Failed to add to shortlist:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async removeFromShortlist(requestId) {\r\n    try {\r\n      await apiService.removeFromShortlist(requestId);\r\n      this.clearCache('shortlists');\r\n    } catch (error) {\r\n      console.error('Failed to remove from shortlist:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async getRequestsByCategory(categoryId) {\r\n    try {\r\n      console.log('DataService.getRequestsByCategory called, categoryId:', categoryId);\r\n      \r\n      const requests = await apiService.searchRequests({ category: categoryId });\r\n      console.log('API search result:', requests);\r\n      \r\n      if (!requests || requests.length === 0) {\r\n        console.log('No API results, trying local filter');\r\n        const allRequests = await this.getRequests();\r\n        const filteredRequests = (allRequests || []).filter(req => \r\n          req.category === categoryId || \r\n          req.category?.id === categoryId ||\r\n          req.category?.name === categoryId\r\n        );\r\n        console.log('Local filter result:', filteredRequests);\r\n        return filteredRequests;\r\n      }\r\n      \r\n      return requests.map(req => ({\r\n        id: req._id,\r\n        title: req.title,\r\n        description: req.description,\r\n        category: req.category?.name || req.category,\r\n        urgency: req.urgency,\r\n        location: req.location,\r\n        expectedDate: req.expectedDate ? new Date(req.expectedDate).toISOString().split('T')[0] : null,\r\n        expectedTime: req.expectedTime,\r\n        volunteersNeeded: req.volunteersNeeded,\r\n        status: req.status,\r\n        requesterId: req.requesterId?._id || req.requesterId,\r\n        requesterName: req.requesterId?.name || req.requesterName,\r\n        createdAt: req.createdAt\r\n      }));\r\n    } catch (error) {\r\n      console.error('Failed to get category requests:', error);\r\n      return [];\r\n    }\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}