{"ast":null,"code":"import _objectSpread from\"D:/Study/Git/CSIT314-GP/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Dashboard.jsx (PIN Dashboard)\nimport React,{useState,useEffect}from'react';import{useAuth}from'../../context/AuthContext';import{useLanguage}from'../../context/LanguageContext';import{DataService}from'../../services/dataService';import Navbar from'../../components/Layout/Navbar';import CreateRequestForm from'../../components/PIN/CreateRequestForm';import RequestDetailModal from'../../components/PIN/RequestDetailModal';import'../../styles/pin-dashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PINDashboard=()=>{var _user$name;const{user}=useAuth();const{t}=useLanguage();const[showCreateForm,setShowCreateForm]=useState(false);const[showRequestDetail,setShowRequestDetail]=useState(null);const[editingRequest,setEditingRequest]=useState(null);const[showRatingModal,setShowRatingModal]=useState(false);const[ratingRequestId,setRatingRequestId]=useState(null);const[rating,setRating]=useState(5);const[feedback,setFeedback]=useState('');const[requests,setRequests]=useState([]);const[filteredRequests,setFilteredRequests]=useState([]);const[statusFilter,setStatusFilter]=useState('all');// all, pending, matched, completed\nconst[sortBy,setSortBy]=useState('newest');// newest, oldest, urgent\n// åˆå§‹åŒ–æ•°æ®å’ŒåŠ è½½ç”¨æˆ·è¯·æ±‚\nuseEffect(()=>{let isMounted=true;const loadUserData=async()=>{try{// PINç”¨æˆ·ä¸éœ€è¦è°ƒç”¨initializeDataï¼Œç›´æ¥åŠ è½½è‡ªå·±çš„è¯·æ±‚\nif(user!==null&&user!==void 0&&user.id&&isMounted){const userRequests=await DataService.getUserRequests(user.id);console.log('PIN Dashboard - åŠ è½½çš„è¯·æ±‚æ•°æ®:',userRequests);if(isMounted){setRequests(userRequests||[]);// ç¡®ä¿æ˜¯æ•°ç»„\n}}}catch(error){console.error('åŠ è½½ç”¨æˆ·æ•°æ®å¤±è´¥:',error);if(isMounted){setRequests([]);// è®¾ç½®ä¸ºç©ºæ•°ç»„é˜²æ­¢é”™è¯¯\n}}};loadUserData();return()=>{isMounted=false;};},[user===null||user===void 0?void 0:user.id]);// ç­›é€‰å’Œæ’åºè¯·æ±‚\nuseEffect(()=>{let filtered=[...requests];// æŒ‰çŠ¶æ€ç­›é€‰\nif(statusFilter!=='all'){filtered=filtered.filter(req=>req.status===statusFilter);}// æ’åº\nif(sortBy==='newest'){filtered.sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt));}else if(sortBy==='oldest'){filtered.sort((a,b)=>new Date(a.createdAt)-new Date(b.createdAt));}else if(sortBy==='urgent'){const urgencyOrder={urgent:0,high:1,medium:2,low:3};filtered.sort((a,b)=>urgencyOrder[a.urgency]-urgencyOrder[b.urgency]);}setFilteredRequests(filtered);},[requests,statusFilter,sortBy]);// ä½¿ç”¨æ•°æ®æœåŠ¡è·å–ç»Ÿè®¡ä¿¡æ¯\nconst stats=[{id:'total',title:t('stats.totalRequests'),value:requests.length,icon:'ğŸ“‹',color:'primary'},{id:'matched',title:t('stats.matched'),value:requests.filter(r=>r.status==='matched').length,icon:'âœ…',color:'success'},{id:'pending',title:t('stats.pending'),value:requests.filter(r=>r.status==='pending').length,icon:'â³',color:'warning'},{id:'views',title:t('stats.totalViews'),value:requests.reduce((sum,r)=>sum+(r.viewCount||0),0),icon:'ğŸ‘€',color:'info'}];// å¤„ç†åˆ›å»ºæ–°è¯·æ±‚\nconst handleCreateRequest=async newRequest=>{try{const requestWithUser=_objectSpread(_objectSpread({},newRequest),{},{// ä¿®æ­£locationæ ¼å¼ä¸ºåç«¯æœŸæœ›çš„ç»“æ„\nlocation:{address:newRequest.location},// ç¡®ä¿æ—¥æœŸæ ¼å¼æ­£ç¡®ï¼Œåªæœ‰å½“æ—¥æœŸå­˜åœ¨ä¸”ä¸ä¸ºç©ºå­—ç¬¦ä¸²æ—¶æ‰å¤„ç†\nexpectedDate:newRequest.expectedDate&&newRequest.expectedDate.trim()!==''?new Date(newRequest.expectedDate).toISOString():undefined,// ç¡®ä¿å¿—æ„¿è€…æ•°é‡æ˜¯æ•°å­—ç±»å‹\nvolunteersNeeded:parseInt(newRequest.volunteersNeeded)||1,requesterId:user.id,requesterName:user.name,requesterEmail:user.email,requesterPhone:user.phone||'',requesterAddress:user.address||newRequest.location});// ä½¿ç”¨æ•°æ®æœåŠ¡åˆ›å»ºè¯·æ±‚\nconst createdRequest=await DataService.createRequest(requestWithUser);// æ›´æ–°æœ¬åœ°çŠ¶æ€\nsetRequests(prev=>[createdRequest,...prev]);}catch(error){console.error('åˆ›å»ºè¯·æ±‚å¤±è´¥:',error);alert(t('error.createRequestFailed')||'åˆ›å»ºè¯·æ±‚å¤±è´¥');}};// å¤„ç†æŸ¥çœ‹è¯·æ±‚è¯¦æƒ…\nconst handleViewDetail=request=>{setShowRequestDetail(request);};// å¤„ç†ç¼–è¾‘è¯·æ±‚\nconst handleEditRequest=request=>{setEditingRequest(request);setShowCreateForm(true);// å¤ç”¨åˆ›å»ºè¡¨å•è¿›è¡Œç¼–è¾‘\n};// å¤„ç†æ›´æ–°è¯·æ±‚\nconst handleUpdateRequest=async updatedRequest=>{try{const requestWithUser=_objectSpread(_objectSpread({},updatedRequest),{},{requesterId:user.id});// ä½¿ç”¨æ•°æ®æœåŠ¡æ›´æ–°\nawait DataService.updateRequest(updatedRequest.id,requestWithUser);// æ›´æ–°æœ¬åœ°çŠ¶æ€\nsetRequests(prev=>prev.map(req=>req.id===updatedRequest.id?requestWithUser:req));setEditingRequest(null);}catch(error){console.error('æ›´æ–°è¯·æ±‚å¤±è´¥:',error);alert(t('error.updateRequestFailed')||'æ›´æ–°è¯·æ±‚å¤±è´¥');}};// å¤„ç†åˆ é™¤è¯·æ±‚\nconst handleDeleteRequest=async requestId=>{if(window.confirm(t('common.confirm')+'ï¼Ÿ')){try{// ä½¿ç”¨æ•°æ®æœåŠ¡åˆ é™¤\nawait DataService.deleteRequest(requestId);// æ›´æ–°æœ¬åœ°çŠ¶æ€\nsetRequests(prev=>prev.filter(req=>req.id!==requestId));}catch(error){console.error('åˆ é™¤è¯·æ±‚å¤±è´¥:',error);alert(t('error.deleteRequestFailed')||'åˆ é™¤è¯·æ±‚å¤±è´¥');}}};// å¤„ç†é€‰æ‹©å¿—æ„¿è€…\nconst handleSelectVolunteer=async(requestId,volunteerId)=>{if(window.confirm(t('pin.dashboard.confirmSelect')||'ç¡®å®šé€‰æ‹©è¿™ä½å¿—æ„¿è€…å—ï¼Ÿ')){try{// è°ƒç”¨åŒ¹é…API\nawait DataService.matchRequest(requestId,volunteerId);// é‡æ–°åŠ è½½ç”¨æˆ·è¯·æ±‚\nconst userRequests=await DataService.getUserRequests(user.id);setRequests(userRequests||[]);alert(t('pin.dashboard.selectSuccess')||'å·²æˆåŠŸåŒ¹é…å¿—æ„¿è€…ï¼');}catch(error){console.error('é€‰æ‹©å¿—æ„¿è€…å¤±è´¥:',error);alert(t('error.selectVolunteerFailed')||'é€‰æ‹©å¿—æ„¿è€…å¤±è´¥ï¼Œè¯·é‡è¯•');}}};// å¤„ç†å®Œæˆè¯·æ±‚\nconst handleCompleteRequest=async requestId=>{// æ‰“å¼€è¯„åˆ†å¯¹è¯æ¡†\nsetRatingRequestId(requestId);setRating(5);setFeedback('');setShowRatingModal(true);};const submitCompleteRequest=async()=>{if(!ratingRequestId)return;try{// è°ƒç”¨å®Œæˆè¯·æ±‚APIï¼Œä¼ å…¥è¯„åˆ†å’Œåé¦ˆ\nawait DataService.completeRequest(ratingRequestId,{rating,feedback:feedback.trim()});// å…³é—­å¯¹è¯æ¡†\nsetShowRatingModal(false);setRatingRequestId(null);setRating(5);setFeedback('');// é‡æ–°åŠ è½½ç”¨æˆ·è¯·æ±‚\nconst userRequests=await DataService.getUserRequests(user.id);setRequests(userRequests||[]);alert(t('pin.dashboard.completeSuccess')||'è¯·æ±‚å·²å®Œæˆï¼æ„Ÿè°¢æ‚¨çš„è¯„ä»·ã€‚');}catch(error){console.error('å®Œæˆè¯·æ±‚å¤±è´¥:',error);alert(t('error.completeRequestFailed')||'å®Œæˆè¯·æ±‚å¤±è´¥ï¼Œè¯·é‡è¯•');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"pin-dashboard-container\",children:[/*#__PURE__*/_jsx(Navbar,{userType:\"pin\",user:user}),/*#__PURE__*/_jsx(\"div\",{className:\"pin-main-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pin-hero-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"pin-hero-background\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pin-hero-pattern\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pin-hero-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pin-hero-left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pin-welcome-badge\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge-icon\",children:\"\\uD83C\\uDF1F\"}),/*#__PURE__*/_jsx(\"span\",{children:t('pin.dashboard.welcomeBack')})]}),/*#__PURE__*/_jsxs(\"h1\",{className:\"pin-hero-title\",children:[t('pin.dashboard.hello'),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"name-highlight\",children:user===null||user===void 0?void 0:user.name})]}),/*#__PURE__*/_jsx(\"p\",{className:\"pin-hero-subtitle\",children:t('pin.dashboard.heroSubtitle')}),/*#__PURE__*/_jsxs(\"div\",{className:\"pin-hero-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"pin-hero-btn primary\",onClick:()=>setShowCreateForm(true),children:[/*#__PURE__*/_jsx(\"span\",{className:\"btn-icon\",children:\"\\u2728\"}),t('pin.dashboard.createRequest')]}),/*#__PURE__*/_jsxs(\"button\",{className:\"pin-hero-btn secondary\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"btn-icon\",children:\"\\uD83D\\uDCCA\"}),t('pin.dashboard.viewAnalytics')]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pin-hero-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"pin-hero-avatar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"avatar-glow\"}),/*#__PURE__*/_jsx(\"div\",{className:\"avatar-circle\",children:user!==null&&user!==void 0&&user.avatar?/*#__PURE__*/_jsx(\"img\",{src:user.avatar,alt:user.name,className:\"avatar-image\"}):/*#__PURE__*/_jsx(\"div\",{className:\"avatar-placeholder\",children:(user===null||user===void 0?void 0:(_user$name=user.name)===null||_user$name===void 0?void 0:_user$name.charAt(0).toUpperCase())||'ğŸ‘¤'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"avatar-status-badge\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-dot\"}),/*#__PURE__*/_jsx(\"span\",{className:\"status-text\",children:t('common.online')})]})]})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pin-stats-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pin-stats-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"stats-title\",children:t('pin.dashboard.yourImpact')}),/*#__PURE__*/_jsx(\"p\",{className:\"stats-subtitle\",children:t('pin.dashboard.impactSubtitle')})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pin-stats-grid\",children:stats.map((stat,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"pin-stat-card \".concat(stat.color),style:{animationDelay:\"\".concat(index*0.1,\"s\")},children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-card-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon-circle\",children:/*#__PURE__*/_jsx(\"span\",{className:\"stat-icon\",children:stat.icon})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-value-container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:stat.value}),stat.trend&&/*#__PURE__*/_jsxs(\"div\",{className:\"stat-growth\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"growth-icon\",children:stat.trend>0?'ğŸ“ˆ':'ğŸ“‰'}),/*#__PURE__*/_jsxs(\"span\",{className:\"growth-text\",children:[stat.trend>0?'+':'',stat.trend,\"%\"]})]})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"stat-title\",children:stat.title}),/*#__PURE__*/_jsx(\"p\",{className:\"stat-description\",children:t(\"pin.dashboard.stat.\".concat(stat.id,\".description\"))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-card-glow\"})]},stat.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pin-content-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"pin-content-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pin-main-content-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pin-card-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pin-card-title-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pin-card-icon\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCCB\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pin-card-title-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"pin-card-title\",children:t('pin.dashboard.myRequests')}),/*#__PURE__*/_jsx(\"p\",{className:\"pin-card-subtitle\",children:t('pin.dashboard.manageYourRequests')})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pin-card-badge\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge-count\",children:requests.length}),/*#__PURE__*/_jsx(\"span\",{className:\"badge-label\",children:t('common.total')})]})]}),requests.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"pin-filters-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"filter-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"filter-icon\",children:\"\\uD83D\\uDD0D\"}),t('pin.dashboard.filterByStatus')||'æŒ‰çŠ¶æ€ç­›é€‰']}),/*#__PURE__*/_jsxs(\"select\",{className:\"filter-select\",value:statusFilter,onChange:e=>setStatusFilter(e.target.value),children:[/*#__PURE__*/_jsxs(\"option\",{value:\"all\",children:[t('common.all')||'å…¨éƒ¨',\" (\",requests.length,\")\"]}),/*#__PURE__*/_jsxs(\"option\",{value:\"pending\",children:[t('pin.dashboard.status.pending')||'å¾…å¤„ç†',\" (\",requests.filter(r=>r.status==='pending').length,\")\"]}),/*#__PURE__*/_jsxs(\"option\",{value:\"matched\",children:[t('pin.dashboard.status.matched')||'å·²åŒ¹é…',\" (\",requests.filter(r=>r.status==='matched').length,\")\"]}),/*#__PURE__*/_jsxs(\"option\",{value:\"completed\",children:[t('pin.dashboard.status.completed')||'å·²å®Œæˆ',\" (\",requests.filter(r=>r.status==='completed').length,\")\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"filter-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"filter-icon\",children:\"\\uD83D\\uDCC5\"}),t('pin.dashboard.sortBy')||'æ’åºæ–¹å¼']}),/*#__PURE__*/_jsxs(\"select\",{className:\"filter-select\",value:sortBy,onChange:e=>setSortBy(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"newest\",children:t('pin.dashboard.sort.newest')||'æœ€æ–°åˆ›å»º'}),/*#__PURE__*/_jsx(\"option\",{value:\"oldest\",children:t('pin.dashboard.sort.oldest')||'æœ€æ—©åˆ›å»º'}),/*#__PURE__*/_jsx(\"option\",{value:\"urgent\",children:t('pin.dashboard.sort.urgent')||'æŒ‰ç´§æ€¥ç¨‹åº¦'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-results\",children:[t('pin.dashboard.showing')||'æ˜¾ç¤º',\": \",/*#__PURE__*/_jsx(\"strong\",{children:filteredRequests.length}),\" / \",requests.length]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pin-card-content\",children:filteredRequests.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"pin-requests-grid\",children:filteredRequests.map((request,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"pin-request-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"request-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"request-priority-indicator\",children:/*#__PURE__*/_jsx(\"div\",{className:\"priority-dot \".concat(request.urgency||'medium')})}),/*#__PURE__*/_jsxs(\"div\",{className:\"request-status-badge \".concat(request.status),children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-icon\",children:request.status==='matched'?'âœ…':request.status==='pending'?'â³':'ğŸ”„'}),/*#__PURE__*/_jsx(\"span\",{className:\"status-text\",children:request.status==='matched'?t('pin.dashboard.status.matched'):request.status==='pending'?t('pin.dashboard.status.pending'):t('pin.dashboard.status.processing')})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"request-card-body\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"request-title\",children:request.title}),/*#__PURE__*/_jsx(\"p\",{className:\"request-description\",children:request.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"request-meta-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"meta-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"meta-icon\",children:\"\\uD83C\\uDFF7\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"meta-text\",children:t(\"category.\".concat(request.category))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"meta-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"meta-icon\",children:\"\\uD83D\\uDCC5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"meta-text\",children:DataService.getTimeAgo(request.createdAt,t)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"request-stats-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-icon\",children:\"\\uD83D\\uDC41\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-number\",children:request.viewCount||0}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:t('common.views')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-icon\",children:\"\\u2B50\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-number\",children:request.shortlistCount||0}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:t('common.shortlisted')})]}),request.interestedVolunteers&&request.interestedVolunteers.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item highlight\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-icon\",children:\"\\uD83D\\uDE4B\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-number\",children:request.interestedVolunteers.length}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:t('pin.dashboard.applicants')||'ç”³è¯·è€…'})]})]}),request.interestedVolunteers&&request.interestedVolunteers.length>0&&request.status==='pending'&&/*#__PURE__*/_jsxs(\"div\",{className:\"interested-volunteers-section\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"section-title\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDE4B\"}),\" \",t('pin.dashboard.interestedVolunteers')||'ç”³è¯·çš„å¿—æ„¿è€…']}),/*#__PURE__*/_jsx(\"div\",{className:\"volunteers-list\",children:request.interestedVolunteers.map((volunteer,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"volunteer-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"volunteer-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"volunteer-icon\",children:\"\\uD83D\\uDC64\"}),/*#__PURE__*/_jsx(\"span\",{className:\"volunteer-name\",children:volunteer.name})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-select-volunteer\",onClick:()=>handleSelectVolunteer(request.id,volunteer.id),children:t('pin.dashboard.selectVolunteer')||'é€‰æ‹©'})]},idx))})]}),request.status==='matched'&&request.volunteer&&/*#__PURE__*/_jsxs(\"div\",{className:\"matched-volunteer-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"volunteer-avatar-small\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDC64\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"volunteer-info-small\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"volunteer-name\",children:t('pin.dashboard.matchedWith',{name:request.volunteer})}),/*#__PURE__*/_jsxs(\"button\",{className:\"contact-volunteer-btn\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCAC\"}),t('pin.dashboard.contact')]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"request-card-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"pin-action-btn view\",onClick:()=>handleViewDetail(request),children:[/*#__PURE__*/_jsx(\"span\",{className:\"action-icon\",children:\"\\uD83D\\uDC41\\uFE0F\"}),t('common.view')]}),request.status==='pending'&&/*#__PURE__*/_jsxs(\"button\",{className:\"pin-action-btn edit\",onClick:()=>handleEditRequest(request),children:[/*#__PURE__*/_jsx(\"span\",{className:\"action-icon\",children:\"\\u270F\\uFE0F\"}),t('common.edit')]}),request.status==='matched'&&/*#__PURE__*/_jsxs(\"button\",{className:\"pin-action-btn complete\",onClick:()=>handleCompleteRequest(request.id),children:[/*#__PURE__*/_jsx(\"span\",{className:\"action-icon\",children:\"\\u2705\"}),t('pin.dashboard.complete')||'å®Œæˆ']}),request.status==='pending'&&/*#__PURE__*/_jsxs(\"button\",{className:\"pin-action-btn delete\",onClick:()=>handleDeleteRequest(request.id),children:[/*#__PURE__*/_jsx(\"span\",{className:\"action-icon\",children:\"\\uD83D\\uDDD1\\uFE0F\"}),t('common.delete')]})]})]},request.id||\"request-\".concat(index)))}):/*#__PURE__*/_jsxs(\"div\",{className:\"pin-empty-state\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state-visual\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon-circle\",children:/*#__PURE__*/_jsx(\"span\",{className:\"empty-icon\",children:\"\\uD83D\\uDCDD\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"empty-sparkles\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sparkle\",children:\"\\u2728\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sparkle\",children:\"\\u2B50\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sparkle\",children:\"\\uD83D\\uDCAB\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"empty-state-title\",children:t('pin.dashboard.noRequestsYet')}),/*#__PURE__*/_jsx(\"p\",{className:\"empty-state-description\",children:t('pin.dashboard.createFirstRequest')}),/*#__PURE__*/_jsxs(\"button\",{className:\"pin-cta-button\",onClick:()=>setShowCreateForm(true),children:[/*#__PURE__*/_jsx(\"span\",{className:\"cta-icon\",children:\"\\uD83D\\uDE80\"}),/*#__PURE__*/_jsx(\"span\",{className:\"cta-text\",children:t('pin.dashboard.getStarted')})]})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pin-sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pin-sidebar-card quick-actions-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-card-icon\",children:\"\\u26A1\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"sidebar-card-title\",children:t('pin.dashboard.quickActions')})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-card-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"quick-actions-grid\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"quick-action-item create\",onClick:()=>setShowCreateForm(true),children:[/*#__PURE__*/_jsx(\"div\",{className:\"quick-action-icon\",children:\"\\u2795\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-action-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"quick-action-title\",children:t('pin.dashboard.newRequest')}),/*#__PURE__*/_jsx(\"span\",{className:\"quick-action-desc\",children:t('pin.dashboard.createNewRequest')})]})]}),/*#__PURE__*/_jsxs(\"a\",{href:\"/pin/history\",className:\"quick-action-item history\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"quick-action-icon\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-action-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"quick-action-title\",children:t('pin.dashboard.history')}),/*#__PURE__*/_jsx(\"span\",{className:\"quick-action-desc\",children:t('pin.dashboard.viewHistory')})]})]}),/*#__PURE__*/_jsxs(\"a\",{href:\"/help\",className:\"quick-action-item help\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"quick-action-icon\",children:\"\\u2753\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-action-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"quick-action-title\",children:t('common.help')}),/*#__PURE__*/_jsx(\"span\",{className:\"quick-action-desc\",children:t('pin.dashboard.getHelp')})]})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pin-sidebar-card tips-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-card-icon\",children:\"\\uD83D\\uDCA1\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"sidebar-card-title\",children:t('pin.dashboard.tips')})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-card-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"tips-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tip-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tip-icon\",children:\"\\uD83C\\uDFAF\"}),/*#__PURE__*/_jsx(\"p\",{className:\"tip-text\",children:t('pin.dashboard.tip1')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tip-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tip-icon\",children:\"\\uD83D\\uDCF8\"}),/*#__PURE__*/_jsx(\"p\",{className:\"tip-text\",children:t('pin.dashboard.tip2')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tip-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tip-icon\",children:\"\\uD83E\\uDD1D\"}),/*#__PURE__*/_jsx(\"p\",{className:\"tip-text\",children:t('pin.dashboard.tip3')})]})]})})]})]})]})})]})}),showCreateForm&&/*#__PURE__*/_jsx(CreateRequestForm,{onClose:()=>{setShowCreateForm(false);setEditingRequest(null);},onSubmit:editingRequest?handleUpdateRequest:handleCreateRequest,initialData:editingRequest,isEditing:!!editingRequest}),showRequestDetail&&/*#__PURE__*/_jsx(RequestDetailModal,{request:showRequestDetail,onClose:()=>setShowRequestDetail(null)}),showRatingModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowRatingModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content rating-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t('pin.dashboard.rateVolunteer')||'è¯„ä»·å¿—æ„¿è€…'}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:()=>setShowRatingModal(false),children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rating-section\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[t('pin.dashboard.serviceRating')||'æœåŠ¡è¯„åˆ†',/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"star-rating\",children:[[1,2,3,4,5].map(star=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"star-btn \".concat(star<=rating?'active':''),onClick:()=>setRating(star),children:\"\\u2605\"},star)),/*#__PURE__*/_jsxs(\"span\",{className:\"rating-text\",children:[rating===1&&(t('rating.poor')||'å¾ˆå·®'),rating===2&&(t('rating.fair')||'ä¸€èˆ¬'),rating===3&&(t('rating.good')||'è‰¯å¥½'),rating===4&&(t('rating.veryGood')||'å¾ˆå¥½'),rating===5&&(t('rating.excellent')||'ä¼˜ç§€')]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"feedback-section\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[t('pin.dashboard.feedback')||'è¯„ä»·åé¦ˆ',/*#__PURE__*/_jsxs(\"span\",{className:\"optional\",children:[\"(\",t('common.optional')||'å¯é€‰',\")\"]})]}),/*#__PURE__*/_jsx(\"textarea\",{className:\"feedback-textarea\",placeholder:t('pin.dashboard.feedbackPlaceholder')||'åˆ†äº«æ‚¨å¯¹å¿—æ„¿è€…æœåŠ¡çš„è¯„ä»·å’Œå»ºè®®...',value:feedback,onChange:e=>setFeedback(e.target.value),rows:4,maxLength:500}),/*#__PURE__*/_jsxs(\"div\",{className:\"char-count\",children:[feedback.length,\"/500\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setShowRatingModal(false),children:t('common.cancel')||'å–æ¶ˆ'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:submitCompleteRequest,children:t('pin.dashboard.submitRating')||'æäº¤è¯„ä»·'})]})]})})]});};// ç¡¬ç¼–ç å‡½æ•°å·²ç§»é™¤ï¼Œç°åœ¨ä½¿ç”¨DataServiceå’Œå›½é™…åŒ–\nexport default PINDashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}