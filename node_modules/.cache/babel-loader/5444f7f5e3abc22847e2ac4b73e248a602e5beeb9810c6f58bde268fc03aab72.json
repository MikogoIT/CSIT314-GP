{"ast":null,"code":"import _objectSpread from\"D:/Study/Git/CSIT314-GP/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// System Alerts - ç³»ç»Ÿè­¦æŠ¥é…ç½®é¡µé¢ (System Admin Only)\nimport React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import{useLanguage}from'../../context/LanguageContext';import Navbar from'../../components/Layout/Navbar';import{isSystemAdmin}from'../../utils/permissions';import'../../styles/user-management.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SystemAlerts=()=>{const navigate=useNavigate();const{user}=useAuth();const{t}=useLanguage();const[alerts,setAlerts]=useState([]);const[showCreateModal,setShowCreateModal]=useState(false);const[editingAlert,setEditingAlert]=useState(null);// æƒé™æ£€æŸ¥ - åªæœ‰ System Admin å¯ä»¥è®¿é—®\nuseEffect(()=>{if(!isSystemAdmin(user)){alert(t('permission.denied')||'Access Denied: System Admin only');navigate('/admin/dashboard');}},[user,navigate,t]);// åˆå§‹åŒ–è­¦æŠ¥é…ç½®\nuseEffect(()=>{loadAlerts();},[]);const loadAlerts=()=>{// æ¨¡æ‹Ÿè­¦æŠ¥é…ç½®æ•°æ®\nconst mockAlerts=[{id:1,name:t('admin.alerts.failedLoginAlert')||'å¤±è´¥ç™»å½•è­¦æŠ¥',type:'security',condition:'failed_login_attempts',threshold:5,enabled:true,recipients:['admin@system.com','security@system.com'],description:t('admin.alerts.failedLoginDesc')||'å½“ç”¨æˆ·è¿žç»­å¤±è´¥ç™»å½•è¶…è¿‡é˜ˆå€¼æ—¶è§¦å‘',lastTriggered:new Date(Date.now()-1000*60*60*2).toISOString(),triggerCount:3},{id:2,name:t('admin.alerts.systemResourceAlert')||'ç³»ç»Ÿèµ„æºè­¦æŠ¥',type:'system',condition:'high_memory_usage',threshold:85,enabled:true,recipients:['admin@system.com','ops@system.com'],description:t('admin.alerts.systemResourceDesc')||'å½“ç³»ç»Ÿå†…å­˜ä½¿ç”¨çŽ‡è¶…è¿‡85%æ—¶è§¦å‘',lastTriggered:null,triggerCount:0},{id:3,name:t('admin.alerts.userSurgeAlert')||'ç”¨æˆ·æ³¨å†Œæ¿€å¢ž',type:'user',condition:'high_registration_rate',threshold:50,enabled:false,recipients:['admin@system.com'],description:t('admin.alerts.userSurgeDesc')||'å½“æ¯å°æ—¶æ³¨å†Œç”¨æˆ·è¶…è¿‡50äººæ—¶è§¦å‘',lastTriggered:null,triggerCount:0},{id:4,name:t('admin.alerts.dbConnectionAlert')||'æ•°æ®åº“è¿žæŽ¥å¤±è´¥',type:'system',condition:'database_connection_failed',threshold:1,enabled:true,recipients:['admin@system.com','ops@system.com','tech@system.com'],description:t('admin.alerts.dbConnectionDesc')||'æ•°æ®åº“è¿žæŽ¥å¤±è´¥æ—¶ç«‹å³è§¦å‘',lastTriggered:null,triggerCount:0},{id:5,name:t('admin.alerts.suspiciousIPAlert')||'å¯ç–‘IPæ´»åŠ¨',type:'security',condition:'suspicious_ip_activity',threshold:10,enabled:true,recipients:['security@system.com','admin@system.com'],description:t('admin.alerts.suspiciousIPDesc')||'å½“åŒä¸€IPåœ¨çŸ­æ—¶é—´å†…æœ‰å¼‚å¸¸è¯·æ±‚æ—¶è§¦å‘',lastTriggered:new Date(Date.now()-1000*60*60*24).toISOString(),triggerCount:1}];setAlerts(mockAlerts);};const handleToggleAlert=alertId=>{setAlerts(alerts.map(alert=>alert.id===alertId?_objectSpread(_objectSpread({},alert),{},{enabled:!alert.enabled}):alert));};const handleDeleteAlert=alertId=>{if(window.confirm(t('admin.alerts.confirmDelete')||'ç¡®è®¤åˆ é™¤æ­¤è­¦æŠ¥é…ç½®ï¼Ÿ')){setAlerts(alerts.filter(alert=>alert.id!==alertId));}};const getTypeColor=type=>{const colors={security:'status-suspended',system:'status-active',user:'user-type-badge primary'};return colors[type]||'user-type-badge';};const getTypeIcon=type=>{const icons={security:'ðŸ”’',system:'âš™ï¸',user:'ðŸ‘¥'};return icons[type]||'ðŸ“‹';};const formatTimestamp=timestamp=>{if(!timestamp)return t('common.never')||'ä»Žæœª';const date=new Date(timestamp);const locale=t('common.locale')||'zh-CN';return date.toLocaleString(locale,{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'});};return/*#__PURE__*/_jsxs(\"div\",{className:\"user-management-container\",children:[/*#__PURE__*/_jsx(Navbar,{userType:user===null||user===void 0?void 0:user.userType,user:user}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-management-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/admin/dashboard'),className:\"back-button\",children:[\"\\u2190 \",t('common.back')||'è¿”å›ž']}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-text\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"page-title\",children:[\"\\uD83D\\uDD14 \",t('admin.alerts.title')||'ç³»ç»Ÿè­¦æŠ¥é…ç½®']}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:t('admin.alerts.subtitle')||'é…ç½®ç³»ç»Ÿç›‘æŽ§å’Œé€šçŸ¥è§„åˆ™'})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:()=>setShowCreateModal(true),children:[\"+ \",t('admin.alerts.createNew')||'åˆ›å»ºæ–°è­¦æŠ¥']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:t('admin.alerts.totalAlerts')||'æ€»è­¦æŠ¥æ•°'}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:alerts.length})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\u2705\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:t('admin.alerts.activeAlerts')||'å·²å¯ç”¨'}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:alerts.filter(a=>a.enabled).length})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83D\\uDD14\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:t('admin.alerts.triggered')||'ä»Šæ—¥è§¦å‘'}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:alerts.reduce((sum,a)=>sum+a.triggerCount,0)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83D\\uDD12\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:t('admin.alerts.securityAlerts')||'å®‰å…¨è­¦æŠ¥'}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:alerts.filter(a=>a.type==='security').length})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:alerts.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon\",children:\"\\uD83D\\uDD14\"}),/*#__PURE__*/_jsx(\"h3\",{children:t('admin.alerts.noAlerts')||'æš‚æ— è­¦æŠ¥é…ç½®'}),/*#__PURE__*/_jsx(\"p\",{children:t('admin.alerts.noAlertsDesc')||'ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®åˆ›å»ºæ–°çš„è­¦æŠ¥è§„åˆ™'})]}):/*#__PURE__*/_jsx(\"div\",{className:\"alerts-grid\",children:alerts.map(alert=>/*#__PURE__*/_jsxs(\"div\",{className:\"alert-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-title-section\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"alert-icon\",children:getTypeIcon(alert.type)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"alert-title\",children:alert.name}),/*#__PURE__*/_jsx(\"span\",{className:\"type-badge \".concat(getTypeColor(alert.type)),children:alert.type==='security'?t('admin.alerts.typeSecurity')||'å®‰å…¨':alert.type==='system'?t('admin.alerts.typeSystem')||'ç³»ç»Ÿ':t('admin.alerts.typeUser')||'ç”¨æˆ·'})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"alert-actions\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"toggle-switch\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:alert.enabled,onChange:()=>handleToggleAlert(alert.id)}),/*#__PURE__*/_jsx(\"span\",{className:\"toggle-slider\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"alert-description\",children:alert.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"detail-label\",children:[\"\\uD83D\\uDCCA \",t('admin.alerts.threshold')||'é˜ˆå€¼',\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:alert.threshold})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"detail-label\",children:[\"\\uD83D\\uDCE7 \",t('admin.alerts.recipients')||'æŽ¥æ”¶äºº',\":\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"detail-value\",children:[alert.recipients.length,\" \",t('admin.alerts.people')||'äºº']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"detail-label\",children:[\"\\uD83D\\uDD14 \",t('admin.alerts.lastTriggered')||'æœ€åŽè§¦å‘',\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:formatTimestamp(alert.lastTriggered)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"detail-label\",children:[\"\\uD83D\\uDCC8 \",t('admin.alerts.triggerCount')||'è§¦å‘æ¬¡æ•°',\":\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"detail-value\",children:[alert.triggerCount,\" \",t('admin.alerts.times')||'æ¬¡']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-recipients\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[t('admin.alerts.notifyList')||'é€šçŸ¥åˆ—è¡¨',\":\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"recipients-list\",children:alert.recipients.map((email,index)=>/*#__PURE__*/_jsxs(\"span\",{className:\"recipient-badge\",children:[\"\\uD83D\\uDCE7 \",email]},index))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-footer\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary btn-sm\",onClick:()=>{setEditingAlert(alert);setShowCreateModal(true);},children:[\"\\u270F\\uFE0F \",t('common.edit')||'ç¼–è¾‘']}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-danger btn-sm\",onClick:()=>handleDeleteAlert(alert.id),children:[\"\\uD83D\\uDDD1\\uFE0F \",t('common.delete')||'åˆ é™¤']})]})]},alert.id))})}),showCreateModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowCreateModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:editingAlert?t('admin.alerts.editAlert')||'ç¼–è¾‘è­¦æŠ¥':t('admin.alerts.createAlert')||'åˆ›å»ºè­¦æŠ¥'}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>setShowCreateModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon\",children:\"\\uD83D\\uDEA7\"}),/*#__PURE__*/_jsx(\"h3\",{children:t('admin.alerts.comingSoon')||'åŠŸèƒ½å¼€å‘ä¸­'}),/*#__PURE__*/_jsx(\"p\",{children:t('admin.alerts.comingSoonDesc')||'è­¦æŠ¥åˆ›å»ºå’Œç¼–è¾‘åŠŸèƒ½å³å°†æŽ¨å‡º'})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setShowCreateModal(false),children:t('common.close')||'å…³é—­'})})]})})]}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:\"\\n        .alerts-grid {\\n          display: grid;\\n          grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));\\n          gap: 1.5rem;\\n          padding: 1rem;\\n        }\\n\\n        .alert-card {\\n          background: white;\\n          border-radius: 12px;\\n          border: 1px solid #e5e7eb;\\n          overflow: hidden;\\n          transition: all 0.3s ease;\\n        }\\n\\n        .alert-card:hover {\\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\\n          transform: translateY(-2px);\\n        }\\n\\n        .alert-header {\\n          display: flex;\\n          justify-content: space-between;\\n          align-items: center;\\n          padding: 1.5rem;\\n          border-bottom: 1px solid #e5e7eb;\\n          background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\\n        }\\n\\n        .alert-title-section {\\n          display: flex;\\n          align-items: center;\\n          gap: 1rem;\\n        }\\n\\n        .alert-icon {\\n          font-size: 2rem;\\n        }\\n\\n        .alert-title {\\n          margin: 0 0 0.5rem 0;\\n          font-size: 1.1rem;\\n          font-weight: 600;\\n        }\\n\\n        .type-badge {\\n          padding: 0.25rem 0.75rem;\\n          border-radius: 12px;\\n          font-size: 0.85rem;\\n          font-weight: 500;\\n        }\\n\\n        .toggle-switch {\\n          position: relative;\\n          display: inline-block;\\n          width: 50px;\\n          height: 24px;\\n        }\\n\\n        .toggle-switch input {\\n          opacity: 0;\\n          width: 0;\\n          height: 0;\\n        }\\n\\n        .toggle-slider {\\n          position: absolute;\\n          cursor: pointer;\\n          top: 0;\\n          left: 0;\\n          right: 0;\\n          bottom: 0;\\n          background-color: #ccc;\\n          transition: 0.4s;\\n          border-radius: 24px;\\n        }\\n\\n        .toggle-slider:before {\\n          position: absolute;\\n          content: \\\"\\\";\\n          height: 18px;\\n          width: 18px;\\n          left: 3px;\\n          bottom: 3px;\\n          background-color: white;\\n          transition: 0.4s;\\n          border-radius: 50%;\\n        }\\n\\n        input:checked + .toggle-slider {\\n          background-color: #10b981;\\n        }\\n\\n        input:checked + .toggle-slider:before {\\n          transform: translateX(26px);\\n        }\\n\\n        .alert-body {\\n          padding: 1.5rem;\\n        }\\n\\n        .alert-description {\\n          color: #666;\\n          margin-bottom: 1rem;\\n          line-height: 1.6;\\n        }\\n\\n        .alert-details {\\n          display: grid;\\n          grid-template-columns: repeat(2, 1fr);\\n          gap: 1rem;\\n          margin-bottom: 1rem;\\n          padding: 1rem;\\n          background: #f8f9fa;\\n          border-radius: 8px;\\n        }\\n\\n        .detail-item {\\n          display: flex;\\n          flex-direction: column;\\n          gap: 0.25rem;\\n        }\\n\\n        .detail-label {\\n          font-size: 0.85rem;\\n          color: #666;\\n          font-weight: 500;\\n        }\\n\\n        .detail-value {\\n          font-size: 1rem;\\n          font-weight: 600;\\n          color: #1f2937;\\n        }\\n\\n        .alert-recipients {\\n          margin-top: 1rem;\\n        }\\n\\n        .recipients-list {\\n          display: flex;\\n          flex-wrap: wrap;\\n          gap: 0.5rem;\\n          margin-top: 0.5rem;\\n        }\\n\\n        .recipient-badge {\\n          padding: 0.25rem 0.75rem;\\n          background: #e0f2fe;\\n          color: #0369a1;\\n          border-radius: 12px;\\n          font-size: 0.85rem;\\n        }\\n\\n        .alert-footer {\\n          display: flex;\\n          gap: 0.5rem;\\n          padding: 1rem 1.5rem;\\n          border-top: 1px solid #e5e7eb;\\n          background: #f8f9fa;\\n        }\\n\\n        .btn-sm {\\n          padding: 0.5rem 1rem;\\n          font-size: 0.9rem;\\n        }\\n\\n        .btn-danger {\\n          background-color: #ef4444;\\n          color: white;\\n        }\\n\\n        .btn-danger:hover {\\n          background-color: #dc2626;\\n        }\\n      \"})]});};export default SystemAlerts;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}