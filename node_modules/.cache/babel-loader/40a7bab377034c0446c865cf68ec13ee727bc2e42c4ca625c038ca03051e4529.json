{"ast":null,"code":"import _objectSpread from\"D:/Study/Git/CSIT314-GP/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Login.jsx\nimport React,{useState}from'react';import{useNavigate,Link}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import{useLanguage}from'../../context/LanguageContext';import LanguageSwitcher from'../../components/Common/LanguageSwitcher';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Login=()=>{const[formData,setFormData]=useState({email:'',password:'',userType:''});const[error,setError]=useState('');const[isLoading,setIsLoading]=useState(false);const{login}=useAuth();const{t}=useLanguage();const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();setError('');setIsLoading(true);// Check if it's admin email\nconst isAdmin=formData.email==='mikogo@systemadmin.com'||formData.email==='mikogo@pmanager.com';if(!formData.userType&&!isAdmin){setError(t('auth.login.error.userType'));setIsLoading(false);return;}try{// Call AuthContext's login method\nconst result=await login(formData.email,formData.password,formData.userType);if(result.success){var _result$user;// Login successful, navigate to appropriate page\nconst userType=((_result$user=result.user)===null||_result$user===void 0?void 0:_result$user.userType)||formData.userType;switch(userType){case'pin':navigate('/pin/dashboard');break;case'csr':navigate('/csr/search');break;case'system_admin':case'platform_manager':navigate('/admin/dashboard');break;default:navigate('/');}}else{// Handle error codes and display corresponding translated messages\nlet errorMessage=t('common.error');if(result.errorCode){switch(result.errorCode){case'USER_NOT_EXISTS':errorMessage=t('auth.login.error.userNotExists');break;case'USER_SUSPENDED':errorMessage=t('auth.login.error.userSuspended');break;case'INVALID_CREDENTIALS':errorMessage='é‚®ç®±æˆ–å¯†ç é”™è¯¯';break;default:errorMessage=result.error||t('common.error');}}else{errorMessage=result.error||t('common.error');}setError(errorMessage);}}catch(error){setError(t('common.error'));console.error('ç™»å½•é”™è¯¯:',error);}finally{setIsLoading(false);}};const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};// Check if current email is admin email\nconst isAdminEmail=formData.email==='mikogo@systemadmin.com'||formData.email==='mikogo@pmanager.com';const userTypes=[{value:'pin',label:t('userType.pin'),icon:'ðŸ™‹',description:t('userType.pin.description')},{value:'csr',label:t('userType.csr'),icon:'ðŸ¤',description:t('userType.csr.description')}];return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"auth-background\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-hero\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hero-icon\",children:\"\\uD83E\\uDD1D\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"hero-title\",children:t('app.title')}),/*#__PURE__*/_jsx(\"p\",{className:\"hero-subtitle\",children:t('app.subtitle')})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"auth-header\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"auth-title\",children:t('auth.login.title')}),/*#__PURE__*/_jsx(\"p\",{className:\"auth-subtitle\",children:t('auth.login.subtitle')})]}),/*#__PURE__*/_jsx(LanguageSwitcher,{})]})}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-error\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"alert-icon\",children:\"\\u26A0\\uFE0F\"}),error]}),/*#__PURE__*/_jsxs(\"form\",{className:\"auth-form\",onSubmit:handleSubmit,children:[!isAdminEmail&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:t('auth.login.userType')}),/*#__PURE__*/_jsx(\"div\",{className:\"user-type-grid\",children:userTypes.map(type=>/*#__PURE__*/_jsxs(\"label\",{className:\"user-type-card \".concat(formData.userType===type.value?'selected':''),children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"userType\",value:type.value,checked:formData.userType===type.value,onChange:handleChange,className:\"sr-only\"}),/*#__PURE__*/_jsx(\"div\",{className:\"user-type-icon\",children:type.icon}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-type-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-type-label\",children:type.label}),/*#__PURE__*/_jsx(\"div\",{className:\"user-type-desc\",children:type.description})]})]},type.value))})]}),isAdminEmail&&/*#__PURE__*/_jsxs(\"div\",{className:\"admin-login-notice\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"notice-icon\",children:\"\\uD83D\\uDC68\\u200D\\uD83D\\uDCBC\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"notice-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:t('auth.login.adminLogin')}),/*#__PURE__*/_jsx(\"p\",{children:t('auth.login.adminLoginDesc')})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:t('auth.login.email')}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-with-icon\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-icon\",children:\"\\uD83D\\uDCE7\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",className:\"form-input\",placeholder:t('auth.login.email'),value:formData.email,onChange:handleChange,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:t('auth.login.password')}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-with-icon\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-icon\",children:\"\\uD83D\\uDD12\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:\"form-input\",placeholder:t('auth.login.password'),value:formData.password,onChange:handleChange,required:true})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-full \".concat(isLoading?'loading':''),disabled:isLoading,children:isLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"loading-spinner\"}),t('common.loading')]}):t('auth.login.submit')})]}),/*#__PURE__*/_jsx(\"div\",{className:\"auth-footer\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"auth-link\",children:[t('auth.login.noAccount'),\" \",/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"link\",children:t('auth.login.registerNow')})]})})]})]});};export default Login;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}