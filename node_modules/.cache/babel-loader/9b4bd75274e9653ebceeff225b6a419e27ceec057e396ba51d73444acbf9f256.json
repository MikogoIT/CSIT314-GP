{"ast":null,"code":"// Áªü‰∏ÄÊï∞ÊçÆÊúçÂä° - Áé∞Âú®‰ΩøÁî®ÂêéÁ´ØAPIËÄå‰∏çÊòØlocalStorage\n// src/services/dataService.js\n\nimport apiService from './apiService';\nexport class DataService {\n  // Ê£ÄÊü•ÁºìÂ≠òÊòØÂê¶ÊúâÊïà\n  static isCacheValid(key) {\n    const lastFetch = this.cache.lastFetch[key];\n    return lastFetch && Date.now() - lastFetch < this.CACHE_DURATION;\n  }\n\n  // Êõ¥Êñ∞ÁºìÂ≠ò\n  static updateCache(key, data) {\n    this.cache[key] = data;\n    this.cache.lastFetch[key] = Date.now();\n  }\n\n  // Ê∏ÖÁ©∫ÁºìÂ≠ò\n  static clearCache(key = null) {\n    if (key) {\n      this.cache[key] = null;\n      delete this.cache.lastFetch[key];\n    } else {\n      this.cache = {\n        categories: null,\n        users: null,\n        requests: null,\n        shortlists: null,\n        lastFetch: {}\n      };\n    }\n  }\n\n  // ÂàÜÁ±ªÊï∞ÊçÆ\n  static async getCategories() {\n    try {\n      // Ê£ÄÊü•ÁºìÂ≠ò\n      if (this.isCacheValid('categories') && this.cache.categories) {\n        return this.cache.categories;\n      }\n      const categories = await apiService.getCategories();\n\n      // Á°Æ‰øùcategoriesÊòØÊï∞ÁªÑ\n      if (!Array.isArray(categories)) {\n        throw new Error('Ëé∑ÂèñÁöÑÂàÜÁ±ªÊï∞ÊçÆÊ†ºÂºè‰∏çÊ≠£Á°Æ');\n      }\n\n      // ËΩ¨Êç¢Êï∞ÊçÆÊ†ºÂºè‰ª•ÂÖºÂÆπÁé∞Êúâ‰ª£Á†Å\n      const formattedCategories = categories.map(cat => ({\n        id: cat.name || cat._id,\n        name: `category.${cat.name}`,\n        icon: cat.icon || 'üìÅ',\n        color: this.getColorFromHex(cat.color || '#42a5f5')\n      }));\n      this.updateCache('categories', formattedCategories);\n      return formattedCategories;\n    } catch (error) {\n      console.error('Ëé∑ÂèñÂàÜÁ±ªÂ§±Ë¥•Ôºå‰ΩøÁî®ÈªòËÆ§Êï∞ÊçÆ:', error);\n      // ‰ΩøÁî®ÈªòËÆ§Êï∞ÊçÆ‰Ωú‰∏∫ÂêéÂ§á\n      const defaultCategories = [{\n        id: 'medical',\n        name: 'category.medical',\n        icon: 'üè•'\n      }, {\n        id: 'transportation',\n        name: 'category.transport',\n        icon: 'üöó'\n      }, {\n        id: 'shopping',\n        name: 'category.shopping',\n        icon: 'üõí'\n      }, {\n        id: 'household',\n        name: 'category.household',\n        icon: 'üè†'\n      }, {\n        id: 'companion',\n        name: 'category.companion',\n        icon: 'üë•'\n      }, {\n        id: 'technology',\n        name: 'category.technology',\n        icon: 'üíª'\n      }, {\n        id: 'education',\n        name: 'category.education',\n        icon: 'üìö'\n      }, {\n        id: 'other',\n        name: 'category.other',\n        icon: 'üìù'\n      }];\n      return defaultCategories;\n    }\n  }\n\n  // Â∞ÜÂçÅÂÖ≠ËøõÂà∂È¢úËâ≤ËΩ¨Êç¢‰∏∫ËØ≠‰πâÂåñÈ¢úËâ≤Âêç\n  static getColorFromHex(hexColor) {\n    const colorMap = {\n      '#ff4757': 'danger',\n      '#ffa726': 'warning',\n      '#42a5f5': 'primary',\n      '#66bb6a': 'success',\n      '#ab47bc': 'info',\n      '#26c6da': 'secondary'\n    };\n    return colorMap[hexColor] || 'primary';\n  }\n\n  // Á¥ßÊÄ•Á®ãÂ∫¶Êï∞ÊçÆÔºàÈùôÊÄÅÊï∞ÊçÆÔºåÊó†ÈúÄAPIÔºâ\n  static getUrgencyLevels() {\n    return [{\n      id: 'low',\n      name: 'urgency.low',\n      color: 'success'\n    }, {\n      id: 'medium',\n      name: 'urgency.medium',\n      color: 'warning'\n    }, {\n      id: 'high',\n      name: 'urgency.high',\n      color: 'danger'\n    }, {\n      id: 'urgent',\n      name: 'urgency.urgent',\n      color: 'critical'\n    }];\n  }\n\n  // Áä∂ÊÄÅÊï∞ÊçÆÔºàÈùôÊÄÅÊï∞ÊçÆÔºåÊó†ÈúÄAPIÔºâ\n  static getStatusOptions() {\n    return [{\n      id: 'pending',\n      name: 'status.pending',\n      color: 'warning'\n    }, {\n      id: 'matched',\n      name: 'status.matched',\n      color: 'success'\n    }, {\n      id: 'completed',\n      name: 'status.completed',\n      color: 'info'\n    }, {\n      id: 'cancelled',\n      name: 'status.cancelled',\n      color: 'danger'\n    }];\n  }\n\n  // Ëé∑ÂèñÁî®Êà∑Êï∞ÊçÆ\n  static async getUsers() {\n    try {\n      // Ê£ÄÊü•ÁºìÂ≠ò\n      if (this.isCacheValid('users') && this.cache.users) {\n        return this.cache.users;\n      }\n      const users = await apiService.getAllUsers();\n      this.updateCache('users', users);\n      return users;\n    } catch (error) {\n      console.error('Ëé∑ÂèñÁî®Êà∑Êï∞ÊçÆÂ§±Ë¥•:', error);\n      return [];\n    }\n  }\n\n  // Ëé∑ÂèñËØ∑Ê±ÇÊï∞ÊçÆ\n  static async getRequests() {\n    try {\n      // Ê£ÄÊü•ÁºìÂ≠ò\n      if (this.isCacheValid('requests') && this.cache.requests) {\n        return this.cache.requests;\n      }\n\n      // Ê£ÄÊü•Áî®Êà∑Á±ªÂûãÔºåÁÆ°ÁêÜÂëò‰ΩøÁî®‰∏çÂêåÁöÑAPI\n      const currentUser = JSON.parse(localStorage.getItem('user') || '{}');\n      let requests = [];\n      if (currentUser.userType === 'admin') {\n        // ÁÆ°ÁêÜÂëò‰ΩøÁî®getAllRequestsËé∑ÂèñÊâÄÊúâËØ∑Ê±Ç\n        const allRequests = await apiService.getAllRequests();\n        requests = allRequests || [];\n      } else {\n        // ÊôÆÈÄöÁî®Êà∑‰ΩøÁî®getRequestsÔºåÂêéÁ´Ø‰ºöÊ†πÊçÆÁî®Êà∑Á±ªÂûãËøáÊª§\n        const response = await apiService.getRequests();\n        requests = response.requests || response || [];\n      }\n\n      // ËΩ¨Êç¢Êï∞ÊçÆÊ†ºÂºè‰ª•ÂÖºÂÆπÁé∞Êúâ‰ª£Á†Å\n      const formattedRequests = requests.map(req => {\n        var _req$category, _req$requester, _req$requester2, _req$requesterId, _req$requester3, _req$requesterId2, _req$requester4, _req$requesterId3, _req$requester5, _req$requesterId4, _req$assignedVoluntee, _req$stats, _req$stats2;\n        return {\n          id: req._id,\n          title: req.title,\n          description: req.description,\n          category: ((_req$category = req.category) === null || _req$category === void 0 ? void 0 : _req$category.name) || req.category,\n          urgency: req.urgency,\n          location: req.location,\n          expectedDate: req.expectedDate ? new Date(req.expectedDate).toISOString().split('T')[0] : null,\n          expectedTime: req.expectedTime,\n          volunteersNeeded: req.volunteersNeeded,\n          status: req.status,\n          // Fix: Use 'requester' field instead of 'requesterId'\n          requesterId: ((_req$requester = req.requester) === null || _req$requester === void 0 ? void 0 : _req$requester._id) || req.requesterId || req.requester,\n          requesterName: ((_req$requester2 = req.requester) === null || _req$requester2 === void 0 ? void 0 : _req$requester2.name) || ((_req$requesterId = req.requesterId) === null || _req$requesterId === void 0 ? void 0 : _req$requesterId.name) || req.requesterName || 'Unknown',\n          requesterEmail: ((_req$requester3 = req.requester) === null || _req$requester3 === void 0 ? void 0 : _req$requester3.email) || ((_req$requesterId2 = req.requesterId) === null || _req$requesterId2 === void 0 ? void 0 : _req$requesterId2.email) || req.requesterEmail,\n          requesterPhone: ((_req$requester4 = req.requester) === null || _req$requester4 === void 0 ? void 0 : _req$requester4.phone) || ((_req$requesterId3 = req.requesterId) === null || _req$requesterId3 === void 0 ? void 0 : _req$requesterId3.phone) || req.requesterPhone,\n          requesterAddress: ((_req$requester5 = req.requester) === null || _req$requester5 === void 0 ? void 0 : _req$requester5.address) || ((_req$requesterId4 = req.requesterId) === null || _req$requesterId4 === void 0 ? void 0 : _req$requesterId4.address) || req.requesterAddress,\n          volunteer: ((_req$assignedVoluntee = req.assignedVolunteer) === null || _req$assignedVoluntee === void 0 ? void 0 : _req$assignedVoluntee.name) || req.volunteer,\n          viewCount: req.viewCount || ((_req$stats = req.stats) === null || _req$stats === void 0 ? void 0 : _req$stats.viewCount) || 0,\n          shortlistCount: req.shortlistCount || ((_req$stats2 = req.stats) === null || _req$stats2 === void 0 ? void 0 : _req$stats2.shortlistCount) || 0,\n          createdAt: req.createdAt,\n          matchedAt: req.matchedAt\n        };\n      });\n      this.updateCache('requests', formattedRequests);\n      return formattedRequests;\n    } catch (error) {\n      console.error('Ëé∑ÂèñËØ∑Ê±ÇÊï∞ÊçÆÂ§±Ë¥•:', error);\n      return [];\n    }\n  }\n\n  // Ëé∑ÂèñÊî∂ËóèÂ§πÊï∞ÊçÆ\n  static async getShortlists() {\n    try {\n      // Ê£ÄÊü•ÁºìÂ≠ò\n      if (this.isCacheValid('shortlists') && this.cache.shortlists) {\n        return this.cache.shortlists;\n      }\n\n      // ‰ªélocalStorageËé∑ÂèñÊâÄÊúâÁî®Êà∑ÁöÑÊî∂ËóèÂ§πÊï∞ÊçÆ\n      const allShortlists = [];\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && key.startsWith('shortlist_')) {\n          try {\n            const shortlist = JSON.parse(localStorage.getItem(key));\n            if (Array.isArray(shortlist)) {\n              allShortlists.push(...shortlist);\n            }\n          } catch (parseError) {\n            console.warn(`Failed to parse shortlist data for key ${key}`);\n          }\n        }\n      }\n      this.updateCache('shortlists', allShortlists);\n      return allShortlists;\n    } catch (error) {\n      console.error('Ëé∑ÂèñÊî∂ËóèÂ§πÊï∞ÊçÆÂ§±Ë¥•:', error);\n      return [];\n    }\n  }\n\n  // ‰øùÂ≠òÂàÜÁ±ªÊï∞ÊçÆ\n  static async saveCategories(categories) {\n    try {\n      // Ê≥®ÊÑèÔºöËøôÈáåÈúÄË¶ÅÁÆ°ÁêÜÂëòÊùÉÈôê\n      await apiService.updateCategory(categories);\n      this.clearCache('categories');\n    } catch (error) {\n      console.error('‰øùÂ≠òÂàÜÁ±ªÊï∞ÊçÆÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // ‰øùÂ≠òÁî®Êà∑Êï∞ÊçÆ\n  static async saveUsers(users) {\n    try {\n      // Ê≥®ÊÑèÔºöËøôÈáåÈúÄË¶ÅÁÆ°ÁêÜÂëòÊùÉÈôê\n      // ÂÆûÈôÖÂÆûÁé∞‰∏≠ÔºåÁî®Êà∑Êï∞ÊçÆÈÄöÂ∏∏‰∏ç‰ºöÊâπÈáè‰øùÂ≠ò\n      this.clearCache('users');\n    } catch (error) {\n      console.error('‰øùÂ≠òÁî®Êà∑Êï∞ÊçÆÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // ‰øùÂ≠òËØ∑Ê±ÇÊï∞ÊçÆ\n  static async saveRequests(requests) {\n    try {\n      // Ê≥®ÊÑèÔºöÈÄöÂ∏∏‰∏ç‰ºöÊâπÈáè‰øùÂ≠òËØ∑Ê±ÇÔºåËÄåÊòØÂçï‰∏™ÂàõÂª∫/Êõ¥Êñ∞\n      this.clearCache('requests');\n    } catch (error) {\n      console.error('‰øùÂ≠òËØ∑Ê±ÇÊï∞ÊçÆÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // ‰øùÂ≠òÊî∂ËóèÂ§πÊï∞ÊçÆ\n  static async saveShortlists(shortlists) {\n    try {\n      // Ê≥®ÊÑèÔºöÈÄöÂ∏∏‰∏ç‰ºöÊâπÈáè‰øùÂ≠òÊî∂ËóèÂ§π\n      this.clearCache('shortlists');\n    } catch (error) {\n      console.error('‰øùÂ≠òÊî∂ËóèÂ§πÊï∞ÊçÆÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // Ê†πÊçÆÂàÜÁ±ªIDËé∑ÂèñÂàÜÁ±ªÂêçÁß∞\n  static async getCategoryById(categoryId) {\n    try {\n      const categories = await this.getCategories();\n      const category = categories.find(cat => cat.id === categoryId);\n      return category || {\n        id: categoryId,\n        name: 'category.other',\n        icon: 'üìù'\n      };\n    } catch (error) {\n      console.error('Ëé∑ÂèñÂàÜÁ±ªÂ§±Ë¥•:', error);\n      return {\n        id: categoryId,\n        name: 'category.other',\n        icon: 'üìù'\n      };\n    }\n  }\n\n  // Ê†πÊçÆÁ¥ßÊÄ•Á®ãÂ∫¶IDËé∑ÂèñÁ¥ßÊÄ•Á®ãÂ∫¶\n  static getUrgencyById(urgencyId) {\n    const urgencyLevels = this.getUrgencyLevels();\n    return urgencyLevels.find(level => level.id === urgencyId) || {\n      id: urgencyId,\n      name: 'urgency.medium',\n      color: 'warning'\n    };\n  }\n\n  // Ê†πÊçÆÁä∂ÊÄÅIDËé∑ÂèñÁä∂ÊÄÅ\n  static getStatusById(statusId) {\n    const statuses = this.getStatusOptions();\n    return statuses.find(status => status.id === statusId) || {\n      id: statusId,\n      name: 'status.pending',\n      color: 'warning'\n    };\n  }\n\n  // Ëé∑ÂèñÁî®Êà∑ÁöÑËØ∑Ê±Ç\n  static async getUserRequests(userId) {\n    try {\n      const requests = await apiService.getUserRequests(userId);\n      if (!Array.isArray(requests)) {\n        console.error('Ëé∑ÂèñÁöÑËØ∑Ê±ÇÊï∞ÊçÆ‰∏çÊòØÊï∞ÁªÑ:', requests);\n        return [];\n      }\n      const mappedRequests = requests.map(req => {\n        var _req$location, _req$requester6, _req$requester7, _req$requester8, _req$requester9, _req$assignedVoluntee2, _req$assignedVoluntee3, _req$assignedVoluntee4, _req$stats3, _req$stats4;\n        return {\n          id: req._id,\n          title: req.title,\n          description: req.description,\n          category: req.category,\n          urgency: req.urgency,\n          location: ((_req$location = req.location) === null || _req$location === void 0 ? void 0 : _req$location.address) || req.location,\n          expectedDate: req.expectedDate ? new Date(req.expectedDate).toISOString().split('T')[0] : null,\n          expectedTime: req.expectedTime,\n          volunteersNeeded: req.volunteersNeeded,\n          status: req.status,\n          contactMethod: req.contactMethod,\n          additionalNotes: req.additionalNotes,\n          requesterId: ((_req$requester6 = req.requester) === null || _req$requester6 === void 0 ? void 0 : _req$requester6._id) || req.requesterId,\n          requesterName: ((_req$requester7 = req.requester) === null || _req$requester7 === void 0 ? void 0 : _req$requester7.name) || req.requesterName,\n          requesterEmail: ((_req$requester8 = req.requester) === null || _req$requester8 === void 0 ? void 0 : _req$requester8.email) || req.requesterEmail,\n          requesterPhone: ((_req$requester9 = req.requester) === null || _req$requester9 === void 0 ? void 0 : _req$requester9.phone) || req.requesterPhone,\n          volunteer: ((_req$assignedVoluntee2 = req.assignedVolunteers) === null || _req$assignedVoluntee2 === void 0 ? void 0 : (_req$assignedVoluntee3 = _req$assignedVoluntee2[0]) === null || _req$assignedVoluntee3 === void 0 ? void 0 : (_req$assignedVoluntee4 = _req$assignedVoluntee3.volunteer) === null || _req$assignedVoluntee4 === void 0 ? void 0 : _req$assignedVoluntee4.name) || req.volunteer,\n          viewCount: ((_req$stats3 = req.stats) === null || _req$stats3 === void 0 ? void 0 : _req$stats3.viewCount) || req.viewCount || 0,\n          shortlistCount: ((_req$stats4 = req.stats) === null || _req$stats4 === void 0 ? void 0 : _req$stats4.shortlistCount) || req.shortlistCount || 0,\n          createdAt: req.createdAt,\n          matchedAt: req.matchedAt\n        };\n      });\n      return mappedRequests;\n    } catch (error) {\n      console.error('Ëé∑ÂèñÁî®Êà∑ËØ∑Ê±ÇÂ§±Ë¥•:', error);\n      return [];\n    }\n  }\n\n  // Ëé∑ÂèñÁî®Êà∑ÁöÑÊî∂ËóèÂ§π\n  static async getUserShortlists(userId) {\n    try {\n      const savedShortlist = localStorage.getItem(`shortlist_${userId}`);\n      return savedShortlist ? JSON.parse(savedShortlist) : [];\n    } catch (error) {\n      console.error('Ëé∑ÂèñÁî®Êà∑Êî∂ËóèÂ§πÂ§±Ë¥•:', error);\n      return [];\n    }\n  }\n\n  // Êó∂Èó¥Ê†ºÂºèÂåñÂ∑•ÂÖ∑\n  static getTimeAgo(dateString, t = null) {\n    if (!dateString) return t ? t('common.unknown') : 'Êú™Áü•';\n    const now = new Date();\n    const past = new Date(dateString);\n    const diffInMinutes = Math.floor((now - past) / (1000 * 60));\n    const diffInHours = Math.floor(diffInMinutes / 60);\n    const diffInDays = Math.floor(diffInHours / 24);\n    if (diffInMinutes < 1) {\n      return t ? t('time.justNow') : 'ÂàöÂàö';\n    }\n    if (diffInMinutes < 60) {\n      return t ? t('time.minutesAgo', {\n        count: diffInMinutes\n      }) : `${diffInMinutes}ÂàÜÈíüÂâç`;\n    }\n    if (diffInHours < 24) {\n      return t ? t('time.hoursAgo', {\n        count: diffInHours\n      }) : `${diffInHours}Â∞èÊó∂Ââç`;\n    }\n    if (diffInDays < 7) {\n      return t ? t('time.daysAgo', {\n        count: diffInDays\n      }) : `${diffInDays}Â§©Ââç`;\n    }\n    const diffInWeeks = Math.floor(diffInDays / 7);\n    return t ? t('time.weeksAgo', {\n      count: diffInWeeks\n    }) : `${diffInWeeks}Âë®Ââç`;\n  }\n\n  // ÂàùÂßãÂåñÁ§∫‰æãÊï∞ÊçÆÔºàÁé∞Âú®ÈÄöËøáÊï∞ÊçÆÂ∫ìËÑöÊú¨ÂÆåÊàêÔºâ\n  static async initializeData() {\n    try {\n      // Ê£ÄÊü•Êï∞ÊçÆÂ∫ìÊòØÂê¶Â∑≤ÊúâÊï∞ÊçÆ\n      const users = await this.getUsers();\n      const requests = await this.getRequests();\n      if (users.length === 0 || requests.length === 0) {\n        console.warn('Êï∞ÊçÆÂ∫ì‰∏≠Ê≤°ÊúâË∂≥Â§üÁöÑÊï∞ÊçÆ„ÄÇËØ∑ËøêË°åÂêéÁ´ØÁöÑÊï∞ÊçÆÂ∫ìÂàùÂßãÂåñËÑöÊú¨Ôºö');\n        console.warn('cd backend && node init-database.js');\n        console.warn('ÊàñËÄÖ‰ΩøÁî® npm run init-db ÂëΩ‰ª§');\n      }\n    } catch (error) {\n      console.error('Ê£ÄÊü•Êï∞ÊçÆÂ∫ìÊï∞ÊçÆÂ§±Ë¥•:', error);\n      console.warn('ËØ∑Á°Æ‰øùÂêéÁ´ØÊúçÂä°Ê≠£Âú®ËøêË°åÔºåÂπ∂ÂàùÂßãÂåñÊï∞ÊçÆÂ∫ìÊï∞ÊçÆ');\n    }\n  }\n\n  // ÊêúÁ¥¢ÂíåËøáÊª§ÂäüËÉΩ\n  static filterRequests(requests, filters) {\n    return requests.filter(request => {\n      // ÊêúÁ¥¢ÊñáÊú¨ËøáÊª§\n      if (filters.searchText) {\n        const searchLower = filters.searchText.toLowerCase();\n        const matchesText = request.title.toLowerCase().includes(searchLower) || request.description.toLowerCase().includes(searchLower) || request.location.toLowerCase().includes(searchLower);\n        if (!matchesText) return false;\n      }\n\n      // ÂàÜÁ±ªËøáÊª§\n      if (filters.category && filters.category !== 'all') {\n        if (request.category !== filters.category) return false;\n      }\n\n      // Á¥ßÊÄ•Á®ãÂ∫¶ËøáÊª§\n      if (filters.urgency && filters.urgency !== 'all') {\n        if (request.urgency !== filters.urgency) return false;\n      }\n\n      // Áä∂ÊÄÅËøáÊª§\n      if (filters.status && filters.status !== 'all') {\n        if (request.status !== filters.status) return false;\n      }\n      return true;\n    });\n  }\n\n  // Ëé∑ÂèñÁªüËÆ°Êï∞ÊçÆ\n  static async getStatistics(userId = null) {\n    try {\n      const users = await this.getUsers();\n      const requests = await this.getRequests();\n      const shortlists = await this.getShortlists();\n      if (userId) {\n        // Áî®Êà∑‰∏™‰∫∫ÁªüËÆ°\n        const userRequests = requests.filter(r => r.requesterId === userId);\n        const userShortlists = shortlists.filter(s => s.userId === userId);\n        return {\n          totalRequests: userRequests.length,\n          matched: userRequests.filter(r => r.status === 'matched').length,\n          pending: userRequests.filter(r => r.status === 'pending').length,\n          completed: userRequests.filter(r => r.status === 'completed').length,\n          totalViews: userRequests.reduce((sum, r) => sum + (r.viewCount || 0), 0),\n          totalShortlists: userShortlists.length\n        };\n      } else {\n        // Á≥ªÁªüÊï¥‰ΩìÁªüËÆ°\n        return {\n          totalUsers: users.length,\n          activeUsers: users.filter(u => u.status === 'active').length,\n          totalRequests: requests.length,\n          activeRequests: requests.filter(r => r.status === 'pending' || r.status === 'matched').length,\n          matchedRequests: requests.filter(r => r.status === 'matched').length,\n          completedRequests: requests.filter(r => r.status === 'completed').length,\n          totalShortlists: shortlists.length\n        };\n      }\n    } catch (error) {\n      console.error('Ëé∑ÂèñÁªüËÆ°Êï∞ÊçÆÂ§±Ë¥•:', error);\n      return {\n        totalUsers: 0,\n        activeUsers: 0,\n        totalRequests: 0,\n        activeRequests: 0,\n        matchedRequests: 0,\n        completedRequests: 0,\n        totalShortlists: 0\n      };\n    }\n  }\n\n  // ÂàõÂª∫Êñ∞ËØ∑Ê±Ç\n  static async createRequest(requestData) {\n    try {\n      var _newRequest$category;\n      const newRequest = await apiService.createRequest(requestData);\n      this.clearCache('requests');\n      return {\n        id: newRequest._id,\n        title: newRequest.title,\n        description: newRequest.description,\n        category: ((_newRequest$category = newRequest.category) === null || _newRequest$category === void 0 ? void 0 : _newRequest$category.name) || newRequest.category,\n        urgency: newRequest.urgency,\n        location: newRequest.location,\n        expectedDate: newRequest.expectedDate ? new Date(newRequest.expectedDate).toISOString().split('T')[0] : null,\n        expectedTime: newRequest.expectedTime,\n        volunteersNeeded: newRequest.volunteersNeeded,\n        status: newRequest.status,\n        requesterId: newRequest.requesterId,\n        createdAt: newRequest.createdAt\n      };\n    } catch (error) {\n      console.error('ÂàõÂª∫ËØ∑Ê±ÇÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // Êõ¥Êñ∞ËØ∑Ê±Ç\n  static async updateRequest(requestId, updateData) {\n    try {\n      const updatedRequest = await apiService.updateRequest(requestId, updateData);\n      this.clearCache('requests');\n      return updatedRequest;\n    } catch (error) {\n      console.error('Êõ¥Êñ∞ËØ∑Ê±ÇÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // Âà†Èô§ËØ∑Ê±Ç\n  static async deleteRequest(requestId) {\n    try {\n      await apiService.deleteRequest(requestId);\n      this.clearCache('requests');\n    } catch (error) {\n      console.error('Âà†Èô§ËØ∑Ê±ÇÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // Ê∑ªÂä†Âà∞Êî∂ËóèÂ§π\n  static async addToShortlist(requestId) {\n    try {\n      const result = await apiService.addToShortlist(requestId);\n      this.clearCache('shortlists');\n      return result;\n    } catch (error) {\n      console.error('Ê∑ªÂä†Âà∞Êî∂ËóèÂ§πÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // ‰ªéÊî∂ËóèÂ§πÁßªÈô§\n  static async removeFromShortlist(requestId) {\n    try {\n      await apiService.removeFromShortlist(requestId);\n      this.clearCache('shortlists');\n    } catch (error) {\n      console.error('‰ªéÊî∂ËóèÂ§πÁßªÈô§Â§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // Ê†πÊçÆÂàÜÁ±ªËé∑ÂèñËØ∑Ê±Ç\n  static async getRequestsByCategory(categoryId) {\n    try {\n      console.log('DataService.getRequestsByCategory Ë∞ÉÁî®ÔºåcategoryId:', categoryId);\n\n      // Â∞ùËØïÁõ¥Êé•ÈÄöËøáAPIÊêúÁ¥¢\n      const requests = await apiService.searchRequests({\n        category: categoryId\n      });\n      console.log('APIÊêúÁ¥¢ÁªìÊûú:', requests);\n      if (!requests || requests.length === 0) {\n        // Â¶ÇÊûúAPIÊêúÁ¥¢Ê≤°ÊúâÁªìÊûúÔºåÂ∞ùËØïËé∑ÂèñÊâÄÊúâËØ∑Ê±ÇÁÑ∂ÂêéÊú¨Âú∞ËøáÊª§\n        console.log('APIÊêúÁ¥¢Êó†ÁªìÊûúÔºåÂ∞ùËØïÊú¨Âú∞ËøáÊª§');\n        const allRequests = await this.getRequests();\n        const filteredRequests = (allRequests || []).filter(req => {\n          var _req$category2, _req$category3;\n          return req.category === categoryId || ((_req$category2 = req.category) === null || _req$category2 === void 0 ? void 0 : _req$category2.id) === categoryId || ((_req$category3 = req.category) === null || _req$category3 === void 0 ? void 0 : _req$category3.name) === categoryId;\n        });\n        console.log('Êú¨Âú∞ËøáÊª§ÁªìÊûú:', filteredRequests);\n        return filteredRequests;\n      }\n      return requests.map(req => {\n        var _req$category4, _req$requesterId5, _req$requesterId6;\n        return {\n          id: req._id,\n          title: req.title,\n          description: req.description,\n          category: ((_req$category4 = req.category) === null || _req$category4 === void 0 ? void 0 : _req$category4.name) || req.category,\n          urgency: req.urgency,\n          location: req.location,\n          expectedDate: req.expectedDate ? new Date(req.expectedDate).toISOString().split('T')[0] : null,\n          expectedTime: req.expectedTime,\n          volunteersNeeded: req.volunteersNeeded,\n          status: req.status,\n          requesterId: ((_req$requesterId5 = req.requesterId) === null || _req$requesterId5 === void 0 ? void 0 : _req$requesterId5._id) || req.requesterId,\n          requesterName: ((_req$requesterId6 = req.requesterId) === null || _req$requesterId6 === void 0 ? void 0 : _req$requesterId6.name) || req.requesterName,\n          createdAt: req.createdAt\n        };\n      });\n    } catch (error) {\n      console.error('Ëé∑ÂèñÂàÜÁ±ªËØ∑Ê±ÇÂ§±Ë¥•:', error);\n      return [];\n    }\n  }\n}\n// ÁºìÂ≠òÊï∞ÊçÆ\nDataService.cache = {\n  categories: null,\n  users: null,\n  requests: null,\n  shortlists: null,\n  lastFetch: {}\n};\n// ÁºìÂ≠òÊúâÊïàÊúüÔºà5ÂàÜÈíüÔºâ\nDataService.CACHE_DURATION = 5 * 60 * 1000;","map":{"version":3,"names":["apiService","DataService","isCacheValid","key","lastFetch","cache","Date","now","CACHE_DURATION","updateCache","data","clearCache","categories","users","requests","shortlists","getCategories","Array","isArray","Error","formattedCategories","map","cat","id","name","_id","icon","color","getColorFromHex","error","console","defaultCategories","hexColor","colorMap","getUrgencyLevels","getStatusOptions","getUsers","getAllUsers","getRequests","currentUser","JSON","parse","localStorage","getItem","userType","allRequests","getAllRequests","response","formattedRequests","req","_req$category","_req$requester","_req$requester2","_req$requesterId","_req$requester3","_req$requesterId2","_req$requester4","_req$requesterId3","_req$requester5","_req$requesterId4","_req$assignedVoluntee","_req$stats","_req$stats2","title","description","category","urgency","location","expectedDate","toISOString","split","expectedTime","volunteersNeeded","status","requesterId","requester","requesterName","requesterEmail","email","requesterPhone","phone","requesterAddress","address","volunteer","assignedVolunteer","viewCount","stats","shortlistCount","createdAt","matchedAt","getShortlists","allShortlists","i","length","startsWith","shortlist","push","parseError","warn","saveCategories","updateCategory","saveUsers","saveRequests","saveShortlists","getCategoryById","categoryId","find","getUrgencyById","urgencyId","urgencyLevels","level","getStatusById","statusId","statuses","getUserRequests","userId","mappedRequests","_req$location","_req$requester6","_req$requester7","_req$requester8","_req$requester9","_req$assignedVoluntee2","_req$assignedVoluntee3","_req$assignedVoluntee4","_req$stats3","_req$stats4","contactMethod","additionalNotes","assignedVolunteers","getUserShortlists","savedShortlist","getTimeAgo","dateString","t","past","diffInMinutes","Math","floor","diffInHours","diffInDays","count","diffInWeeks","initializeData","filterRequests","filters","filter","request","searchText","searchLower","toLowerCase","matchesText","includes","getStatistics","userRequests","r","userShortlists","s","totalRequests","matched","pending","completed","totalViews","reduce","sum","totalShortlists","totalUsers","activeUsers","u","activeRequests","matchedRequests","completedRequests","createRequest","requestData","_newRequest$category","newRequest","updateRequest","requestId","updateData","updatedRequest","deleteRequest","addToShortlist","result","removeFromShortlist","getRequestsByCategory","log","searchRequests","filteredRequests","_req$category2","_req$category3","_req$category4","_req$requesterId5","_req$requesterId6"],"sources":["D:/Study/CSIT314-GP/src/services/dataService.js"],"sourcesContent":["// Áªü‰∏ÄÊï∞ÊçÆÊúçÂä° - Áé∞Âú®‰ΩøÁî®ÂêéÁ´ØAPIËÄå‰∏çÊòØlocalStorage\n// src/services/dataService.js\n\nimport apiService from './apiService';\n\nexport class DataService {\n  // ÁºìÂ≠òÊï∞ÊçÆ\n  static cache = {\n    categories: null,\n    users: null,\n    requests: null,\n    shortlists: null,\n    lastFetch: {}\n  };\n\n  // ÁºìÂ≠òÊúâÊïàÊúüÔºà5ÂàÜÈíüÔºâ\n  static CACHE_DURATION = 5 * 60 * 1000;\n\n  // Ê£ÄÊü•ÁºìÂ≠òÊòØÂê¶ÊúâÊïà\n  static isCacheValid(key) {\n    const lastFetch = this.cache.lastFetch[key];\n    return lastFetch && (Date.now() - lastFetch) < this.CACHE_DURATION;\n  }\n\n  // Êõ¥Êñ∞ÁºìÂ≠ò\n  static updateCache(key, data) {\n    this.cache[key] = data;\n    this.cache.lastFetch[key] = Date.now();\n  }\n\n  // Ê∏ÖÁ©∫ÁºìÂ≠ò\n  static clearCache(key = null) {\n    if (key) {\n      this.cache[key] = null;\n      delete this.cache.lastFetch[key];\n    } else {\n      this.cache = {\n        categories: null,\n        users: null,\n        requests: null,\n        shortlists: null,\n        lastFetch: {}\n      };\n    }\n  }\n\n  // ÂàÜÁ±ªÊï∞ÊçÆ\n  static async getCategories() {\n    try {\n      // Ê£ÄÊü•ÁºìÂ≠ò\n      if (this.isCacheValid('categories') && this.cache.categories) {\n        return this.cache.categories;\n      }\n\n      const categories = await apiService.getCategories();\n      \n      // Á°Æ‰øùcategoriesÊòØÊï∞ÁªÑ\n      if (!Array.isArray(categories)) {\n        throw new Error('Ëé∑ÂèñÁöÑÂàÜÁ±ªÊï∞ÊçÆÊ†ºÂºè‰∏çÊ≠£Á°Æ');\n      }\n      \n      // ËΩ¨Êç¢Êï∞ÊçÆÊ†ºÂºè‰ª•ÂÖºÂÆπÁé∞Êúâ‰ª£Á†Å\n      const formattedCategories = categories.map(cat => ({\n        id: cat.name || cat._id,\n        name: `category.${cat.name}`,\n        icon: cat.icon || 'üìÅ',\n        color: this.getColorFromHex(cat.color || '#42a5f5')\n      }));\n\n      this.updateCache('categories', formattedCategories);\n      return formattedCategories;\n    } catch (error) {\n      console.error('Ëé∑ÂèñÂàÜÁ±ªÂ§±Ë¥•Ôºå‰ΩøÁî®ÈªòËÆ§Êï∞ÊçÆ:', error);\n      // ‰ΩøÁî®ÈªòËÆ§Êï∞ÊçÆ‰Ωú‰∏∫ÂêéÂ§á\n      const defaultCategories = [\n        { id: 'medical', name: 'category.medical', icon: 'üè•' },\n        { id: 'transportation', name: 'category.transport', icon: 'üöó' },\n        { id: 'shopping', name: 'category.shopping', icon: 'üõí' },\n        { id: 'household', name: 'category.household', icon: 'üè†' },\n        { id: 'companion', name: 'category.companion', icon: 'üë•' },\n        { id: 'technology', name: 'category.technology', icon: 'üíª' },\n        { id: 'education', name: 'category.education', icon: 'üìö' },\n        { id: 'other', name: 'category.other', icon: 'üìù' }\n      ];\n      return defaultCategories;\n    }\n  }\n\n  // Â∞ÜÂçÅÂÖ≠ËøõÂà∂È¢úËâ≤ËΩ¨Êç¢‰∏∫ËØ≠‰πâÂåñÈ¢úËâ≤Âêç\n  static getColorFromHex(hexColor) {\n    const colorMap = {\n      '#ff4757': 'danger',\n      '#ffa726': 'warning', \n      '#42a5f5': 'primary',\n      '#66bb6a': 'success',\n      '#ab47bc': 'info',\n      '#26c6da': 'secondary'\n    };\n    return colorMap[hexColor] || 'primary';\n  }\n\n  // Á¥ßÊÄ•Á®ãÂ∫¶Êï∞ÊçÆÔºàÈùôÊÄÅÊï∞ÊçÆÔºåÊó†ÈúÄAPIÔºâ\n  static getUrgencyLevels() {\n    return [\n      { id: 'low', name: 'urgency.low', color: 'success' },\n      { id: 'medium', name: 'urgency.medium', color: 'warning' },\n      { id: 'high', name: 'urgency.high', color: 'danger' },\n      { id: 'urgent', name: 'urgency.urgent', color: 'critical' }\n    ];\n  }\n\n  // Áä∂ÊÄÅÊï∞ÊçÆÔºàÈùôÊÄÅÊï∞ÊçÆÔºåÊó†ÈúÄAPIÔºâ\n  static getStatusOptions() {\n    return [\n      { id: 'pending', name: 'status.pending', color: 'warning' },\n      { id: 'matched', name: 'status.matched', color: 'success' },\n      { id: 'completed', name: 'status.completed', color: 'info' },\n      { id: 'cancelled', name: 'status.cancelled', color: 'danger' }\n    ];\n  }\n\n  // Ëé∑ÂèñÁî®Êà∑Êï∞ÊçÆ\n  static async getUsers() {\n    try {\n      // Ê£ÄÊü•ÁºìÂ≠ò\n      if (this.isCacheValid('users') && this.cache.users) {\n        return this.cache.users;\n      }\n\n      const users = await apiService.getAllUsers();\n      this.updateCache('users', users);\n      return users;\n    } catch (error) {\n      console.error('Ëé∑ÂèñÁî®Êà∑Êï∞ÊçÆÂ§±Ë¥•:', error);\n      return [];\n    }\n  }\n\n  // Ëé∑ÂèñËØ∑Ê±ÇÊï∞ÊçÆ\n  static async getRequests() {\n    try {\n      // Ê£ÄÊü•ÁºìÂ≠ò\n      if (this.isCacheValid('requests') && this.cache.requests) {\n        return this.cache.requests;\n      }\n\n      // Ê£ÄÊü•Áî®Êà∑Á±ªÂûãÔºåÁÆ°ÁêÜÂëò‰ΩøÁî®‰∏çÂêåÁöÑAPI\n      const currentUser = JSON.parse(localStorage.getItem('user') || '{}');\n      let requests = [];\n      \n      if (currentUser.userType === 'admin') {\n        // ÁÆ°ÁêÜÂëò‰ΩøÁî®getAllRequestsËé∑ÂèñÊâÄÊúâËØ∑Ê±Ç\n        const allRequests = await apiService.getAllRequests();\n        requests = allRequests || [];\n      } else {\n        // ÊôÆÈÄöÁî®Êà∑‰ΩøÁî®getRequestsÔºåÂêéÁ´Ø‰ºöÊ†πÊçÆÁî®Êà∑Á±ªÂûãËøáÊª§\n        const response = await apiService.getRequests();\n        requests = response.requests || response || [];\n      }\n      \n      // ËΩ¨Êç¢Êï∞ÊçÆÊ†ºÂºè‰ª•ÂÖºÂÆπÁé∞Êúâ‰ª£Á†Å\n      const formattedRequests = requests.map(req => ({\n        id: req._id,\n        title: req.title,\n        description: req.description,\n        category: req.category?.name || req.category,\n        urgency: req.urgency,\n        location: req.location,\n        expectedDate: req.expectedDate ? new Date(req.expectedDate).toISOString().split('T')[0] : null,\n        expectedTime: req.expectedTime,\n        volunteersNeeded: req.volunteersNeeded,\n        status: req.status,\n        // Fix: Use 'requester' field instead of 'requesterId'\n        requesterId: req.requester?._id || req.requesterId || req.requester,\n        requesterName: req.requester?.name || req.requesterId?.name || req.requesterName || 'Unknown',\n        requesterEmail: req.requester?.email || req.requesterId?.email || req.requesterEmail,\n        requesterPhone: req.requester?.phone || req.requesterId?.phone || req.requesterPhone,\n        requesterAddress: req.requester?.address || req.requesterId?.address || req.requesterAddress,\n        volunteer: req.assignedVolunteer?.name || req.volunteer,\n        viewCount: req.viewCount || req.stats?.viewCount || 0,\n        shortlistCount: req.shortlistCount || req.stats?.shortlistCount || 0,\n        createdAt: req.createdAt,\n        matchedAt: req.matchedAt\n      }));\n\n      this.updateCache('requests', formattedRequests);\n      return formattedRequests;\n    } catch (error) {\n      console.error('Ëé∑ÂèñËØ∑Ê±ÇÊï∞ÊçÆÂ§±Ë¥•:', error);\n      return [];\n    }\n  }\n\n  // Ëé∑ÂèñÊî∂ËóèÂ§πÊï∞ÊçÆ\n  static async getShortlists() {\n    try {\n      // Ê£ÄÊü•ÁºìÂ≠ò\n      if (this.isCacheValid('shortlists') && this.cache.shortlists) {\n        return this.cache.shortlists;\n      }\n\n      // ‰ªélocalStorageËé∑ÂèñÊâÄÊúâÁî®Êà∑ÁöÑÊî∂ËóèÂ§πÊï∞ÊçÆ\n      const allShortlists = [];\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && key.startsWith('shortlist_')) {\n          try {\n            const shortlist = JSON.parse(localStorage.getItem(key));\n            if (Array.isArray(shortlist)) {\n              allShortlists.push(...shortlist);\n            }\n          } catch (parseError) {\n            console.warn(`Failed to parse shortlist data for key ${key}`);\n          }\n        }\n      }\n      \n      this.updateCache('shortlists', allShortlists);\n      return allShortlists;\n    } catch (error) {\n      console.error('Ëé∑ÂèñÊî∂ËóèÂ§πÊï∞ÊçÆÂ§±Ë¥•:', error);\n      return [];\n    }\n  }\n\n  // ‰øùÂ≠òÂàÜÁ±ªÊï∞ÊçÆ\n  static async saveCategories(categories) {\n    try {\n      // Ê≥®ÊÑèÔºöËøôÈáåÈúÄË¶ÅÁÆ°ÁêÜÂëòÊùÉÈôê\n      await apiService.updateCategory(categories);\n      this.clearCache('categories');\n    } catch (error) {\n      console.error('‰øùÂ≠òÂàÜÁ±ªÊï∞ÊçÆÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // ‰øùÂ≠òÁî®Êà∑Êï∞ÊçÆ\n  static async saveUsers(users) {\n    try {\n      // Ê≥®ÊÑèÔºöËøôÈáåÈúÄË¶ÅÁÆ°ÁêÜÂëòÊùÉÈôê\n      // ÂÆûÈôÖÂÆûÁé∞‰∏≠ÔºåÁî®Êà∑Êï∞ÊçÆÈÄöÂ∏∏‰∏ç‰ºöÊâπÈáè‰øùÂ≠ò\n      this.clearCache('users');\n    } catch (error) {\n      console.error('‰øùÂ≠òÁî®Êà∑Êï∞ÊçÆÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // ‰øùÂ≠òËØ∑Ê±ÇÊï∞ÊçÆ\n  static async saveRequests(requests) {\n    try {\n      // Ê≥®ÊÑèÔºöÈÄöÂ∏∏‰∏ç‰ºöÊâπÈáè‰øùÂ≠òËØ∑Ê±ÇÔºåËÄåÊòØÂçï‰∏™ÂàõÂª∫/Êõ¥Êñ∞\n      this.clearCache('requests');\n    } catch (error) {\n      console.error('‰øùÂ≠òËØ∑Ê±ÇÊï∞ÊçÆÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // ‰øùÂ≠òÊî∂ËóèÂ§πÊï∞ÊçÆ\n  static async saveShortlists(shortlists) {\n    try {\n      // Ê≥®ÊÑèÔºöÈÄöÂ∏∏‰∏ç‰ºöÊâπÈáè‰øùÂ≠òÊî∂ËóèÂ§π\n      this.clearCache('shortlists');\n    } catch (error) {\n      console.error('‰øùÂ≠òÊî∂ËóèÂ§πÊï∞ÊçÆÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // Ê†πÊçÆÂàÜÁ±ªIDËé∑ÂèñÂàÜÁ±ªÂêçÁß∞\n  static async getCategoryById(categoryId) {\n    try {\n      const categories = await this.getCategories();\n      const category = categories.find(cat => cat.id === categoryId);\n      return category || { id: categoryId, name: 'category.other', icon: 'üìù' };\n    } catch (error) {\n      console.error('Ëé∑ÂèñÂàÜÁ±ªÂ§±Ë¥•:', error);\n      return { id: categoryId, name: 'category.other', icon: 'üìù' };\n    }\n  }\n\n  // Ê†πÊçÆÁ¥ßÊÄ•Á®ãÂ∫¶IDËé∑ÂèñÁ¥ßÊÄ•Á®ãÂ∫¶\n  static getUrgencyById(urgencyId) {\n    const urgencyLevels = this.getUrgencyLevels();\n    return urgencyLevels.find(level => level.id === urgencyId) || \n           { id: urgencyId, name: 'urgency.medium', color: 'warning' };\n  }\n\n  // Ê†πÊçÆÁä∂ÊÄÅIDËé∑ÂèñÁä∂ÊÄÅ\n  static getStatusById(statusId) {\n    const statuses = this.getStatusOptions();\n    return statuses.find(status => status.id === statusId) || \n           { id: statusId, name: 'status.pending', color: 'warning' };\n  }\n\n  // Ëé∑ÂèñÁî®Êà∑ÁöÑËØ∑Ê±Ç\n  static async getUserRequests(userId) {\n    try {\n      const requests = await apiService.getUserRequests(userId);\n      \n      if (!Array.isArray(requests)) {\n        console.error('Ëé∑ÂèñÁöÑËØ∑Ê±ÇÊï∞ÊçÆ‰∏çÊòØÊï∞ÁªÑ:', requests);\n        return [];\n      }\n      \n      const mappedRequests = requests.map(req => ({\n        id: req._id,\n        title: req.title,\n        description: req.description,\n        category: req.category,\n        urgency: req.urgency,\n        location: req.location?.address || req.location,\n        expectedDate: req.expectedDate ? new Date(req.expectedDate).toISOString().split('T')[0] : null,\n        expectedTime: req.expectedTime,\n        volunteersNeeded: req.volunteersNeeded,\n        status: req.status,\n        contactMethod: req.contactMethod,\n        additionalNotes: req.additionalNotes,\n        requesterId: req.requester?._id || req.requesterId,\n        requesterName: req.requester?.name || req.requesterName,\n        requesterEmail: req.requester?.email || req.requesterEmail,\n        requesterPhone: req.requester?.phone || req.requesterPhone,\n        volunteer: req.assignedVolunteers?.[0]?.volunteer?.name || req.volunteer,\n        viewCount: req.stats?.viewCount || req.viewCount || 0,\n        shortlistCount: req.stats?.shortlistCount || req.shortlistCount || 0,\n        createdAt: req.createdAt,\n        matchedAt: req.matchedAt\n      }));\n      \n      return mappedRequests;\n    } catch (error) {\n      console.error('Ëé∑ÂèñÁî®Êà∑ËØ∑Ê±ÇÂ§±Ë¥•:', error);\n      return [];\n    }\n  }\n\n  // Ëé∑ÂèñÁî®Êà∑ÁöÑÊî∂ËóèÂ§π\n  static async getUserShortlists(userId) {\n    try {\n      const savedShortlist = localStorage.getItem(`shortlist_${userId}`);\n      return savedShortlist ? JSON.parse(savedShortlist) : [];\n    } catch (error) {\n      console.error('Ëé∑ÂèñÁî®Êà∑Êî∂ËóèÂ§πÂ§±Ë¥•:', error);\n      return [];\n    }\n  }\n\n  // Êó∂Èó¥Ê†ºÂºèÂåñÂ∑•ÂÖ∑\n  static getTimeAgo(dateString, t = null) {\n    if (!dateString) return t ? t('common.unknown') : 'Êú™Áü•';\n    \n    const now = new Date();\n    const past = new Date(dateString);\n    const diffInMinutes = Math.floor((now - past) / (1000 * 60));\n    const diffInHours = Math.floor(diffInMinutes / 60);\n    const diffInDays = Math.floor(diffInHours / 24);\n    \n    if (diffInMinutes < 1) {\n      return t ? t('time.justNow') : 'ÂàöÂàö';\n    }\n    \n    if (diffInMinutes < 60) {\n      return t ? t('time.minutesAgo', { count: diffInMinutes }) : `${diffInMinutes}ÂàÜÈíüÂâç`;\n    }\n    \n    if (diffInHours < 24) {\n      return t ? t('time.hoursAgo', { count: diffInHours }) : `${diffInHours}Â∞èÊó∂Ââç`;\n    }\n    \n    if (diffInDays < 7) {\n      return t ? t('time.daysAgo', { count: diffInDays }) : `${diffInDays}Â§©Ââç`;\n    }\n    \n    const diffInWeeks = Math.floor(diffInDays / 7);\n    return t ? t('time.weeksAgo', { count: diffInWeeks }) : `${diffInWeeks}Âë®Ââç`;\n  }\n\n  // ÂàùÂßãÂåñÁ§∫‰æãÊï∞ÊçÆÔºàÁé∞Âú®ÈÄöËøáÊï∞ÊçÆÂ∫ìËÑöÊú¨ÂÆåÊàêÔºâ\n  static async initializeData() {\n    try {\n      // Ê£ÄÊü•Êï∞ÊçÆÂ∫ìÊòØÂê¶Â∑≤ÊúâÊï∞ÊçÆ\n      const users = await this.getUsers();\n      const requests = await this.getRequests();\n      \n      if (users.length === 0 || requests.length === 0) {\n        console.warn('Êï∞ÊçÆÂ∫ì‰∏≠Ê≤°ÊúâË∂≥Â§üÁöÑÊï∞ÊçÆ„ÄÇËØ∑ËøêË°åÂêéÁ´ØÁöÑÊï∞ÊçÆÂ∫ìÂàùÂßãÂåñËÑöÊú¨Ôºö');\n        console.warn('cd backend && node init-database.js');\n        console.warn('ÊàñËÄÖ‰ΩøÁî® npm run init-db ÂëΩ‰ª§');\n      }\n    } catch (error) {\n      console.error('Ê£ÄÊü•Êï∞ÊçÆÂ∫ìÊï∞ÊçÆÂ§±Ë¥•:', error);\n      console.warn('ËØ∑Á°Æ‰øùÂêéÁ´ØÊúçÂä°Ê≠£Âú®ËøêË°åÔºåÂπ∂ÂàùÂßãÂåñÊï∞ÊçÆÂ∫ìÊï∞ÊçÆ');\n    }\n  }\n\n  // ÊêúÁ¥¢ÂíåËøáÊª§ÂäüËÉΩ\n  static filterRequests(requests, filters) {\n    return requests.filter(request => {\n      // ÊêúÁ¥¢ÊñáÊú¨ËøáÊª§\n      if (filters.searchText) {\n        const searchLower = filters.searchText.toLowerCase();\n        const matchesText = \n          request.title.toLowerCase().includes(searchLower) ||\n          request.description.toLowerCase().includes(searchLower) ||\n          request.location.toLowerCase().includes(searchLower);\n        if (!matchesText) return false;\n      }\n\n      // ÂàÜÁ±ªËøáÊª§\n      if (filters.category && filters.category !== 'all') {\n        if (request.category !== filters.category) return false;\n      }\n\n      // Á¥ßÊÄ•Á®ãÂ∫¶ËøáÊª§\n      if (filters.urgency && filters.urgency !== 'all') {\n        if (request.urgency !== filters.urgency) return false;\n      }\n\n      // Áä∂ÊÄÅËøáÊª§\n      if (filters.status && filters.status !== 'all') {\n        if (request.status !== filters.status) return false;\n      }\n\n      return true;\n    });\n  }\n\n  // Ëé∑ÂèñÁªüËÆ°Êï∞ÊçÆ\n  static async getStatistics(userId = null) {\n    try {\n      const users = await this.getUsers();\n      const requests = await this.getRequests();\n      const shortlists = await this.getShortlists();\n\n      if (userId) {\n        // Áî®Êà∑‰∏™‰∫∫ÁªüËÆ°\n        const userRequests = requests.filter(r => r.requesterId === userId);\n        const userShortlists = shortlists.filter(s => s.userId === userId);\n        \n        return {\n          totalRequests: userRequests.length,\n          matched: userRequests.filter(r => r.status === 'matched').length,\n          pending: userRequests.filter(r => r.status === 'pending').length,\n          completed: userRequests.filter(r => r.status === 'completed').length,\n          totalViews: userRequests.reduce((sum, r) => sum + (r.viewCount || 0), 0),\n          totalShortlists: userShortlists.length\n        };\n      } else {\n        // Á≥ªÁªüÊï¥‰ΩìÁªüËÆ°\n        return {\n          totalUsers: users.length,\n          activeUsers: users.filter(u => u.status === 'active').length,\n          totalRequests: requests.length,\n          activeRequests: requests.filter(r => r.status === 'pending' || r.status === 'matched').length,\n          matchedRequests: requests.filter(r => r.status === 'matched').length,\n          completedRequests: requests.filter(r => r.status === 'completed').length,\n          totalShortlists: shortlists.length\n        };\n      }\n    } catch (error) {\n      console.error('Ëé∑ÂèñÁªüËÆ°Êï∞ÊçÆÂ§±Ë¥•:', error);\n      return {\n        totalUsers: 0,\n        activeUsers: 0,\n        totalRequests: 0,\n        activeRequests: 0,\n        matchedRequests: 0,\n        completedRequests: 0,\n        totalShortlists: 0\n      };\n    }\n  }\n\n  // ÂàõÂª∫Êñ∞ËØ∑Ê±Ç\n  static async createRequest(requestData) {\n    try {\n      const newRequest = await apiService.createRequest(requestData);\n      this.clearCache('requests');\n      \n      return {\n        id: newRequest._id,\n        title: newRequest.title,\n        description: newRequest.description,\n        category: newRequest.category?.name || newRequest.category,\n        urgency: newRequest.urgency,\n        location: newRequest.location,\n        expectedDate: newRequest.expectedDate ? new Date(newRequest.expectedDate).toISOString().split('T')[0] : null,\n        expectedTime: newRequest.expectedTime,\n        volunteersNeeded: newRequest.volunteersNeeded,\n        status: newRequest.status,\n        requesterId: newRequest.requesterId,\n        createdAt: newRequest.createdAt\n      };\n    } catch (error) {\n      console.error('ÂàõÂª∫ËØ∑Ê±ÇÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // Êõ¥Êñ∞ËØ∑Ê±Ç\n  static async updateRequest(requestId, updateData) {\n    try {\n      const updatedRequest = await apiService.updateRequest(requestId, updateData);\n      this.clearCache('requests');\n      return updatedRequest;\n    } catch (error) {\n      console.error('Êõ¥Êñ∞ËØ∑Ê±ÇÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // Âà†Èô§ËØ∑Ê±Ç\n  static async deleteRequest(requestId) {\n    try {\n      await apiService.deleteRequest(requestId);\n      this.clearCache('requests');\n    } catch (error) {\n      console.error('Âà†Èô§ËØ∑Ê±ÇÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // Ê∑ªÂä†Âà∞Êî∂ËóèÂ§π\n  static async addToShortlist(requestId) {\n    try {\n      const result = await apiService.addToShortlist(requestId);\n      this.clearCache('shortlists');\n      return result;\n    } catch (error) {\n      console.error('Ê∑ªÂä†Âà∞Êî∂ËóèÂ§πÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // ‰ªéÊî∂ËóèÂ§πÁßªÈô§\n  static async removeFromShortlist(requestId) {\n    try {\n      await apiService.removeFromShortlist(requestId);\n      this.clearCache('shortlists');\n    } catch (error) {\n      console.error('‰ªéÊî∂ËóèÂ§πÁßªÈô§Â§±Ë¥•:', error);\n      throw error;\n    }\n  }\n\n  // Ê†πÊçÆÂàÜÁ±ªËé∑ÂèñËØ∑Ê±Ç\n  static async getRequestsByCategory(categoryId) {\n    try {\n      console.log('DataService.getRequestsByCategory Ë∞ÉÁî®ÔºåcategoryId:', categoryId);\n      \n      // Â∞ùËØïÁõ¥Êé•ÈÄöËøáAPIÊêúÁ¥¢\n      const requests = await apiService.searchRequests({ category: categoryId });\n      console.log('APIÊêúÁ¥¢ÁªìÊûú:', requests);\n      \n      if (!requests || requests.length === 0) {\n        // Â¶ÇÊûúAPIÊêúÁ¥¢Ê≤°ÊúâÁªìÊûúÔºåÂ∞ùËØïËé∑ÂèñÊâÄÊúâËØ∑Ê±ÇÁÑ∂ÂêéÊú¨Âú∞ËøáÊª§\n        console.log('APIÊêúÁ¥¢Êó†ÁªìÊûúÔºåÂ∞ùËØïÊú¨Âú∞ËøáÊª§');\n        const allRequests = await this.getRequests();\n        const filteredRequests = (allRequests || []).filter(req => \n          req.category === categoryId || \n          req.category?.id === categoryId ||\n          req.category?.name === categoryId\n        );\n        console.log('Êú¨Âú∞ËøáÊª§ÁªìÊûú:', filteredRequests);\n        return filteredRequests;\n      }\n      \n      return requests.map(req => ({\n        id: req._id,\n        title: req.title,\n        description: req.description,\n        category: req.category?.name || req.category,\n        urgency: req.urgency,\n        location: req.location,\n        expectedDate: req.expectedDate ? new Date(req.expectedDate).toISOString().split('T')[0] : null,\n        expectedTime: req.expectedTime,\n        volunteersNeeded: req.volunteersNeeded,\n        status: req.status,\n        requesterId: req.requesterId?._id || req.requesterId,\n        requesterName: req.requesterId?.name || req.requesterName,\n        createdAt: req.createdAt\n      }));\n    } catch (error) {\n      console.error('Ëé∑ÂèñÂàÜÁ±ªËØ∑Ê±ÇÂ§±Ë¥•:', error);\n      return [];\n    }\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}